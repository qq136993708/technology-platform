<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/common.css">
    <link rel="stylesheet" href="/common/css/echart-common.css">
</head>
<body>    
<div class="searchBox">
    <!--查询条件-->
        <label class="dateInput">
            <span>月份</span>
            <input type="text" name="month" placeholder="请选择月份"  value="${month}" title="月份" autocomplete="off" class="form-control" id="month">
        </label>
       <div class="layui-input-inline">
         <select name="companyCode" id="companyCode" >
              <#list companyCodeList as vo>
              	 <#if vo.g0GSJC == '全部'>
              	 	<option value="${vo.g0GSDM}"  selected="selected">${vo.g0GSJC}</option>
              	 </#if>
                 <#if vo.g0GSJC != '全部'>
              	 	<option value="${vo.g0GSDM}">${vo.g0GSJC}</option>
              	 </#if>
               </#list>
            </select>
       </div>
    <!--按钮组-->
    <div class="btnGroup">
        <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" onclick="search_Event()" data-type="searchEvent">查询</button>
    </div>
    <span class="unitBox">单位：万元</span>
</div>

<!--echarts-->
<div class="content-body container">
     <div class="one-chart-box">
         <div class="layui-row echarts">
             <div id="main1" style="width: 100%;height: 400px;"></div>
         </div>
     </div>
     <div class="one-chart-box">
         <div class="layui-row echarts">
             <div id="main2" style="width: 100%;height: 400px;"></div>
         </div>
     </div>
      <!--图表二比一布局-->
        <div class="layui-row two-one-box"  >
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main3" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main4" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
     <!--图表二比一布局-->
        <div class="layui-row two-one-box"  >
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main5" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main6" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
        
         <table class="table" style="min-width:1200px;" border="1">
			     <tr>
			      <td width="100px;">期间</td>
			      <td width="100px;">公司代码</td>
			      <td width="100px;">成本中心</td>
			      <td width="100px;">费用类别</td>
			      <td width="100px;">科目</td>
			      <td width="100px;">科目描述</td>
			      <td width="100px;">加计扣除原因</td>
			      <td width="100px;">本月</td>
			      <td width="100px;">累计</td>
			      <td width="100px;">同期</td>
			     </tr>
			     
			     <tr>
			       <td width="100px;">500</td>
			       <td width="100px;">500</td>
			       <td width="100px;">500</td>
			       <td width="100px;">300</td>
			       <td width="100px;">300</td>
			       <td width="100px;">300</td>
			       <td width="100px;">300</td>
			       <td width="100px;">300</td>
			       <td width="100px;">300</td>
			       <td width="100px;">300</td>
			     </tr>
			   </table>
     
</div>

	
	
	
	
	
<!--表格数据操作js-->
<script src="/common/js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
<script src="/common/js/layer-v3.1.1/layer.js"></script>
<script type="text/javascript" src="/plugins/echarts/echarts.min.js"></script>
<script type="text/javascript" src="/plugins/echarts/walden.js"></script>	
<script type="text/javascript" src="/stp/hana/common/stp_common_line.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_bar.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_pie.js"></script>
<script type="text/javascript">

layui.config({
    base: '/layuiadmin/module/modules/' 
}).use(['jquery','form', 'laydate','table','laypage'], function(){
	  $ = layui.jquery
      ,table = layui.table
      ,form = layui.form
      ,laydate = layui.laydate
	  form.render(null, 'component-form-group');
            laydate.render({
               elem: '#month'
               ,format: 'yyyyMM'
            });
});



function init()
{
		var allCode="${allCode?default('')}";
		var allCode_text="全部院所";
		var v_date=(new Date()).getTime();
		var month=$('#month').val();
		var companyCode=$('#companyCode').val();
		var monthstr=getNowFormatDate($('#month').val());
		var checkText=$("#companyCode").find("option:selected").text();
		if(checkText=='全部')
		{
			checkText="全部院所";
		}
		

		var legends1=["直间接费用比例","加计扣除占比"];
		var xAxisData1=['2014','2015','2016','2017','2018'];
		var seriesData1= [
	        {
	            name:'直间接费用比例',
	            type:'line',
	            color: ['#37A2DA'],
	            data:[82, 24,22,3,94]
	        },
	        {
	            name:'加计扣除占比',
	            type:'line',
	            color: ['#67E0E3'],
	          data:[22, 14,72,3,44]
	        }
	        
	    ];
		var yAxis1=[
	        {
	        	type: 'value',
		            name: '同比',
		            min: 0,
		            max: 100,
		            axisLabel: {
		                formatter: '{value} %'
		            }
	        }
	    ];
		load_mony_line_tt('main1','加计扣除费用占比年度趋势分析',legends1,xAxisData1,yAxis1,seriesData1,monthstr);
		
		
		
		
		var seriesData_2= [
		        {
  		            name:'2014',
  		            type:'bar',
  		            barGap:'80%',
  		            color: ['#37A2DA'],
  		            data:[272, 44,272]
  		        },
  		        {
  		            name:'2015',
  		            type:'bar',
  		            barGap:'80%',
  		            color: ['#67E0E3'],
  		          data:[272, 424,272]
  		        },
  		        {
  		            name:'2016',
  		            type:'bar',
  		            barGap:'80%',
  		          data:[272, 434,272]
  		        },
  		        {
  		            name:'2017',
  		            type:'bar',
  		            barGap:'80%',
  		          data:[272, 44,272]
  		        },
  		        {
  		            name:'2018',
  		            type:'bar',
  		            barGap:'30%',
  		            barCategoryGap:'30%',
  		           
  		          data:[272, 414,272]
  		        }
  		        
  		    ];
		  var yAxis2=  [
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            max: 850,
  		            interval: 200,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        }
  		    ];
		var legends_2=['2014','2015','2016','2017','2018'];
		var xAxisData_2= ["直接费用","间接费用","加计扣除"];
		load_mutl_bar_tt("main2","加计扣除费用金额年度趋势分析",legends_2,xAxisData_2,yAxis2,seriesData_2,monthstr);
		
		
		

		var seriesData_3= [
	        {
	            name:'本年',
	            type:'bar',
	            color: ['#37A2DA'],
	            data:[22, 44, 74, 24,22, 44, 74, 44]
	        },
	        {
	            name:'上年',
	            type:'bar',
	            color: ['#67E0E3'],
	            data:[22, 44, 74, 24,22, 44, 74, 24]
	        },
	        {
	            name:'同比',
	            type:'line',
	            itemStyle : {  /*设置折线颜色*/
                    normal : {
                        color:'#c4cddc'
                    }
                },
	            data:[1.2, 2.3, 32.2, 1.2,1.2, 2.3, 32.2, 1.2]
	        }
	        
	    ];
		  var yAxis3=[
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            max: 250,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        },
  		        {
  		            type: 'value',
  		            name: '同比',
  		            min: 0,
  		            max: 100,
  		            axisLabel: {
  		                formatter: '{value} %'
  		            }
  		        }
  		    ];
		var legends_3=['本年','上年','同比'];
		var xAxisData_3=['直接材料','直接人工','直接折旧','物料消耗','间接人工','修理费','交通费','办公费'];
		load_mutl_bar_tt("main3","加计扣除费用按费用类型同比分析",legends_3,xAxisData_3,yAxis3,seriesData_3,monthstr);
		
		var legend_names_4=['直接材料','直接人工','直接折旧','物料消耗','间接人工','修理费','交通费','办公费'];
		var series_values_4=[
			 {value:135, name:'直接材料'},
             {value:210, name:'直接人工'},
             {value:134, name:'直接折旧'},
             {value:134, name:'物料消耗'},
             {value:134, name:'间接人工'},
             {value:134, name:'修理费'},
             {value:134, name:'交通费'},
             {value:134, name:'办公费'}
		];
		loadPie_tt('main4','加计扣除费用按费用类型占比分析',legend_names_4,series_values_4,monthstr); 
		
		
		var seriesData_5= [
	        {
	            name:'本期',
	            type:'bar',
	            color: ['#37A2DA'],
	            data:[22, 44, 74, 24,22, 44, 74, 44]
	        },
	        {
	            name:'同期',
	            type:'bar',
	            color: ['#67E0E3'],
	            data:[22, 44, 74, 24,22, 44, 74, 24]
	        },
	        {
	            name:'同比',
	            type:'line',
	            itemStyle : {  /*设置折线颜色*/
                    normal : {
                        color:'#c4cddc'
                    }
                },
	            data:[1.2, 2.3, 32.2, 1.2,1.2, 2.3, 32.2, 1.2]
	        }
	        
	    ];
		  var yAxis5=[
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            max: 250,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        },
  		        {
  		            type: 'value',
  		            name: '同比',
  		            min: 0,
  		            max: 100,
  		            axisLabel: {
  		                formatter: '{value} %'
  		            }
  		        }
  		    ];
		var legends_5=['本期','同期','同比'];
		var xAxisData_5=['石勘院','物探院','工程院','石科院','抚研院','北化院','上海院','安工院'];
		load_mutl_bar_tt("main5","计扣除费用按研究院同比分析",legends_5,xAxisData_5,yAxis5,seriesData_5,monthstr);
		
		
		
		var legend_names_6=['石勘院','物探院','工程院','石科院','抚研院','北化院','上海院','安工院'];
		var series_values_6=[
			 {value:135, name:'石勘院'},
              {value:210, name:'物探院'},
              {value:134, name:'工程院'},
              {value:134, name:'石科院'},
              {value:134, name:'抚研院'},
              {value:134, name:'北化院'},
              {value:134, name:'上海院'},
              {value:134, name:'安工院'}
		];
		loadPie_tt('main6','加计扣除费用按研究院占比分析',legend_names_6,series_values_6,monthstr); 
		
		
		
}		
		
init();
function search_Event()
{
	init();
}

        
        
        
        
        
       
        
        
    </script>
</body>
</html>
