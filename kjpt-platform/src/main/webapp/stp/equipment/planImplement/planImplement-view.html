<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/style/common.css">
    <script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
    <script type="text/javascript" src="/layuiadmin/javascript/ckeditor5/ckeditor.js"></script>
    <script type="text/javascript" src="/plugins/jQuery/jQuery-2.2.0.min.js"></script>
    <script type="text/javascript" src="/common/js/base.js"></script>
</head>
<body>
<div class="formBox">
    <form id="planlmplement" name="planlmplement" lay-filter="sysNews-form" class="form-horizontal layui-form">
        <input type="hidden" name="researchInstitute" id="researchInstitute" value="${researchInstitute}">
		<input type="hidden" name="unitPathIds" id="unitPathIds" value="${srePlanImplement.levelId}">
		<input type="hidden" name="parentUnitPathIds" id="parentUnitPathIds" value="${srePlanImplement.sonId}">
		<input type="hidden" name="applyDepartName" id="applyDepartName" value="${srePlanImplement.levelName}">
		<input type="hidden" name="selectState" id="selectState" value="${srePlanImplement.publicationState}">
		<input type="hidden" name="selectpublicationType" id="selectpublicationType" value="${srePlanImplement.publicationType}">
		<input type="hidden" name="dateStr" id="dateStr" value="${dateStr}">
		<input type="hidden" name="selectpuId" id="selectpuId" value="${srePlanImplement.id}">
        <div class="box-body">
            <input type="hidden" name="dataId" id="dataId"/>
            <div class="layui-row">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label for="" class="layui-form-label">规划标题<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                            <input class="layui-input" name="publicationTitle" id="publicationTitle" value="${srePlanImplement.publicationTitle}" disabled="disabled"
                                   lay-verify="required"  autocomplete="off" type="text" >
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label for="" class="layui-form-label">规划类型<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                        <input class="layui-input" name="publicationType" id="publicationType" value="${strtype}" disabled="disabled"
                        		lay-verify="required"  autocomplete="off" type="text" >
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label for="" class="layui-form-label">发布人<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                            <input class="layui-input" name="publisher" id="publisher" value="${srePlanImplement.publisher}" disabled="disabled"
                                   lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label class="layui-form-label">是否发布<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                        <input class="layui-input" name="publicationState" id="publicationState" value="${strState}"
                               disabled="disabled"    lay-verify="required" autocomplete="off">
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label class="layui-form-label">发布时间<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                            <input type="text" class="layui-input" id="publicDate" name="publicDate" value="${dateStr}"  pattern='yyyy-MM-dd' disabled="disabled">
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-form-item layui-form-text">
                    <div class="layui-form-item">
                        <label class="layui-form-label">内容<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                            <textarea name="content" id="content" class="ckeditor">${srePlanImplement.publicationText}</textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-bottom">
                <div class="form-bottom-btns">
	             	<a herf="javascript:void(0)" class="layui-btn layui-btn-sm fontColor-default border-default btnMyBgImg layui-btn-mini layui-btn-white" lay-submit="" id="closeBtn" lay-filter="closeBtn">关闭</a>
	             </div>
            </div>
        </div>
    </form>
</div>
<script>
    var id = "${id?default(0)}";
    if (id != "0") {
        $("#id").val(id);
    }
    layui.use(['jquery', 'form', 'laydate', 'table', 'layer', 'element'],
        function () {
            var $ = layui.jquery, admin = layui.admin, element = layui.element, layer = layui.layer, laydate = layui.laydate, form = layui.form;
            var myEditor = null;
            ClassicEditor.create(document.querySelector('#content'),{}).then(editor => {
                myEditor = editor;
            });
            form.render(null, 'sysNews-form');
            laydate.render({
                elem: '#publicDate'
                , position: 'fixed'
            });
            $("#closeBtn").click(function () {
                var index = parent.layer.getFrameIndex(window.name);
                parent.layer.close(index);
            })
            
            $('.layui-btn').on('click', function(){
            	var type = $(this).data('type');
                active[type] ? active[type].call(this) : '';
            });
        });
    
</script>
</body>
</html>