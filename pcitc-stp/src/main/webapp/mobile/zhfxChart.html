<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <title>科技管理平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0,user-scalable=0" />
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/mobile/css/mobileNew.css">
</head>
<body>
<header>
    <div class="m_return child">
        <a href="index2.html"><img src="/mobile/images/icon-back.png"/> </a>
        <h4>科技研发综合分析</h4>
    </div>
</header>
<main class="main">
	<div class="layui-card layui-form " lay-filter="component-form-element">
		<div class="layui-card-body layui-row layui-col-space10">
			<div class="layui-col-xs4">
				<select name="city" lay-verify="">
					<option value="">请选择年份</option>
					<option value="010">北京</option>
					<option value="021">上海</option>
					<option value="0571">杭州</option>
				</select>
			</div>
			<div class="layui-col-xs4">
				<select name="city" lay-verify="">
					<option value="">全部</option>
					<option value="010">北京</option>
					<option value="021">上海</option>
					<option value="0571">杭州</option>
				</select>
			</div>
			<div class="layui-col-xs2">
				<button class="layui-btn layui-btn-primary">搜索</button>
			</div>
		</div>
	</div>
    <div class="main-card first-card">
        <div class="main-card-header hasborder">科研预算经费年度趋势分析</div>
        <div class="main-card-body">
            <div id="qsfxChart" style="width: 100%;height:300px;"></div>
        </div>
    </div>
    <div class="main-card" id="isKJBPerson_id" >
        <div class="main-card-header hasborder">预算经费按项目类型占比分析</div>
        <div class="main-card-body">
       		<div id="zbfxChart" style="width: 100%;height:300px;"></div>
        </div>
    </div>
</main>
<script type="text/javascript" src="/plugins/jQuery/jQuery-2.2.0.min.js"></script>
<script src="/layuiadmin/layui/layui.js"></script>
<script type="text/javascript" src="/plugins/echarts/echarts.min.js"></script>
<!-- <script type="text/javascript" src="/plugins/echarts/echarts4.min.js"></script> -->


<script>
    (function(doc, win) {
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
            recalc = function() {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth) return;
                docEl.style.fontSize =  (clientWidth / 10.8) + 'px';
            };
        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);
    layui.use('form', function(){
    	var form = layui.form; 
    	form.render();
   	});
    //渲染图表
    var qsfxChart = echarts.init(document.getElementById('qsfxChart'));
    var zbfxChart = echarts.init(document.getElementById('zbfxChart'));
    
    var data = [];
    for (var i = 6; i < 10; i++) {
        data.push(Math.round(Math.random() * 500) + 200);
    }
    qsfxChart.showLoading({
        text : '加载中……',
        effect : 'bubble',
        maskColor:'rgba(255,255,255,0.7)',
        textStyle : {
            fontSize : 20
        }
    });
    zbfxChart.showLoading({
        text : '加载中……',
        effect : 'bubble',
        maskColor:'rgba(255,255,255,0.7)',
        textStyle : {
            fontSize : 20
        }
    });
	// 指定图表的配置项和数据
	var qsfxOption = {
		tooltip : {
			trigger: 'axis',
			axisPointer: {
                type: 'shadow',
                label: {
                    show: true
                }
            }
		},
		legend: {
			data:['2015','2016','2017','2018'],
			x:'right'
// 			itemWidth:16,
// 			itemHeight:7
		},
		color:['#FFBEB2','#60B2FF','#C59EE1','#59E18B'],
		calculable : true,
		grid: {
			right: '15'
		},
		xAxis : [
			{
				type : 'category',
				data : ['其他项目','十条龙项目','国家项目','重大项目'],
				axisLine: {            // 坐标轴线
		            show: true,        // 默认显示，属性show控制显示与否
		            lineStyle: {       // 属性lineStyle控制线条样式
		                color: '#B9B9B9',
		                width: 1,
		                type: 'solid'
		            }
		        },
		        axisTick: {            // 坐标轴小标记
		            show: false      // 属性show控制显示与否，默认不显示
		        },
		        axisLabel: {           // 坐标轴文本标签，详见axis.axisLabel
		            show: true,
		            interval: 'auto',
		            rotate: 0,
		            margin: 8,
		            // formatter: null,
		            textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
		                color: '#666666',
		                fontSize: 12,
		            }
		        }
			}
		],
		yAxis : [
			{
				type : 'value',
				axisLine: {            // 坐标轴线
		            show: true,        // 默认显示，属性show控制显示与否
		            lineStyle: {       // 属性lineStyle控制线条样式
		                color: '#B9B9B9',
		                width: 1,
		                type: 'solid'
		            }
		        },
		        axisTick: {            // 坐标轴小标记
		            show: false      // 属性show控制显示与否，默认不显示
		        },
		        axisLabel: {           // 坐标轴文本标签，详见axis.axisLabel
		            show: true,
		            interval: 'auto',
		            rotate: 0,
		            margin: 8,
		            // formatter: null,
		            textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
		                color: '#666666'
		            }
		        },
		        splitLine: {                // 分隔线
		            show: false,        // 默认显示，属性show控制显示与否
		            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
		                color: ['#ccc'],
		                width: 1,
		                type: 'solid'
		            }
		        }
			}
		],
		series : [
			{
				name:'2015',
				type:'bar',
				barWidth: 6,
				itemStyle: {
		            normal: {
		                barBorderRadius: [7, 7, 0, 0]
		            }
		        },
				data:[2.0, 4.9, 7.0, 23.2]
			},
			{
				name:'2016',
				type:'bar',
				barWidth: 6,
				itemStyle: {
		            normal: {
		                barBorderRadius: [7, 7, 0, 0]
		            }
		        },
				data:[2.6, 5.9, 9.0, 26.4]
			}
			,
			{
				name:'2017',
				type:'bar',
				barWidth: 6,
				itemStyle: {
		            normal: {
		                barBorderRadius: [7, 7, 0, 0]
		            }
		        },
				data:[2.6, 5.9, 9.0, 26.4]
			},
			{
				name:'2018',
				type:'bar',
				barWidth: 6,
				itemStyle: {
		            normal: {
		                barBorderRadius: [7, 7, 0, 0]
		            }
		        },
				data:[2.6, 5.9, 9.0, 26.4]
			}
		]
	};
	var zbfxOption = {
	    tooltip: {
	        trigger: 'item',
	        formatter: "{a} <br/>{b}: {c} ({d}%)"
	    },
	    color:['#60B2FF','#C59EE1','#59E18B','#FFBEB2'],
	    series: [
	        {
	            name:'访问来源',
	            type:'pie',
	            radius: ['50%', '70%'],
	            avoidLabelOverlap: false,
	            selectedMode: 'multiple',
	            label: {
	                normal: {
	                    show: true,
	                },
	                emphasis: {
	                    show: true,
	                    textStyle: {
	                        fontSize: '30',
	                        
	                        fontWeight: 'bold'
	                    }
	                }
	            },
	            label: {
	                normal: {
	                    // \n\n可让文字居于牵引线上方，很关键
	                    //  {b}  代表显示的内容标题
	                    // {c}代表数据
	                    formatter: ' {b} \n\n',
	                    borderWidth: 20,
	                    borderRadius: 4,
	                    padding: [0, -75],
	                    rich: {
	                        a: {
	                            color: '#333',
	                            fontSize: 12,
	                            lineHeight: 20
	                        },
	                        b: {
	                            fontSize: 12,
	                            lineHeight: 20,
	                            color: '#333'
	                        }
	                    },
	                    textStyle: {
	                    	color: '#666666',
	                    	fontSize: '14'
	                    }
	                }
	            },
	            labelLine: {
	                normal: {
	                    length: 20,
	                    length2: 70
	                }
	            },
	            data:[
	                {value:335, name:'直接访问'},
	                {value:310, name:'邮件营销'},
	                {value:234, name:'联盟广告'},
	                {value:135, name:'视频广告'}
	            ]
	        }
	    ]
	};
	
	// 使用刚指定的配置项和数据显示图表。
	qsfxChart.setOption(qsfxOption);
	zbfxChart.setOption(zbfxOption);
	qsfxChart.hideLoading();  //提示关闭
	zbfxChart.hideLoading();  //提示关闭
      
	window.addEventListener("resize", () => { 
		this.qsfxChart.resize();  
		this.zbfxChart.resize();  
	});
</script>
</body>
</html>