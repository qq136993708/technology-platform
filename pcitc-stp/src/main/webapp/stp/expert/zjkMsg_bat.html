<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/style/common.css">

    <script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
    <script type="text/javascript" src="/plugins/jQuery/jQuery-2.2.0.min.js"></script>
    <script type="text/javascript" src="/common/js/base.js"></script>
</head>
<body>
<div class="formBox">
    <form id="zjkMsg-form" name="zjkMsg-form" lay-filter="zjkMsg-form" class="form-horizontal layui-form">
        <input type="hidden" name="groupId">

        <input type="hidden" name="dataId" id="dataId" value="${ids}"/>

        <div class="box-body">

            <div class="layui-row">

                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label class="layui-form-label">是否回复<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                            <select name="isComplete" id="isComplete" lay-filter="isComplete">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
                    <div class="layui-form-item">
                        <label class="layui-form-label">是否同意<span class="must-fill">*</span></label>
                        <div class="layui-input-block">
                            <select name="sysFlag" id="sysFlag" lay-filter="sysFlag">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-bottom">
                    <div class="form-bottom-btns">
                        <button class="layui-btn layui-btn-sm fontColor-white btnMyBgImg layui-btn-mini layui-btn-blue" lay-submit="" lay-filter="submitBtn">保存</button>
                        <button type="button" class="layui-btn layui-btn-sm fontColor-default border-default btnMyBgImg layui-btn-mini layui-btn-white" id="closeBtn">取消</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<script>

    ajaxPost('/dictionary/list/ROOT_UNIVERSAL_WEHTHER', null, function (data, status) {
        $.each(data, function (i, dt) {
            $("#isComplete").append("<option value='" + data[i].code + "'>" + data[i].name + "</option>");
        });
    });
    ajaxPost('/dictionary/list/ROOT_UNIVERSAL_WEHTHER', null, function (data, status) {
        $.each(data, function (i, dt) {
            $("#sysFlag").append("<option value='" + data[i].code + "'>" + data[i].name + "</option>");
        });
    });
    layui.use(['jquery', 'form', 'laydate', 'table', 'layer', 'element'],
        function () {
            var $ = layui.jquery, admin = layui.admin, element = layui.element, layer = layui.layer, laydate = layui.laydate, form = layui.form;
            form.render(null, 'zjkMsg-form');
            /* 监听指定开关 */
            form.on('switch(component-form-switchTest)', function (
                data) {
                layer.msg('开关checked：'
                    + (this.checked ? 'true' : 'false'), {
                    offset: '6px'
                });
                layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF',
                    data.othis)
            });
            /* 监听提交 */
            form.on('submit(submitBtn)', function (data) {
                console.log(data.field);
                ajaxPost("/zjkMsg/saveZjkMsgBat", data.field, function (dt, status) {
                    layer.msg("操作成功");
                    parent.layui.table.reload('zjkMsgTableId', {where: {param: {}}});
                    var index = parent.layer.getFrameIndex(window.name);
                    parent.layer.close(index);
                });
                return false;
            });
            $("#closeBtn").click(function () {
                var index = parent.layer.getFrameIndex(window.name);
                parent.layer.close(index);
            })
        });
</script>
</body>
</html>