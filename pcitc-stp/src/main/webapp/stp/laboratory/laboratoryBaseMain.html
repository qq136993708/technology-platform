<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>重点实验室</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="Shortcut Icon" href="/layuiadmin/layui/images/favicon.ico" />
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/adminStp.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/mainStp.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/common.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/second.css" media="all">
    <script src="/layuiadmin/layui/layui.js"></script>
</head>
<body>
<div class="layui-fluid">
    <div class="layui-main-lab">
        <div class="layui-card">
            <div class="layui-card-header-lab layui-card-header-l">
                国家级研发机构
            </div>
            <div class="layui-card-body btn-function">
                <div class="layui-country">
                    <!-- <p class="layui-country-p">国家级研发机构</p>-->
                    <div id="countryUnit" class="layui-country-div">
                        <!--<div>
                            <a href="/instituteIndex?url=/laboratoryBase/laboratoryBaseDetails/004" target="_blank">
                                <span class="layui-text-span">依托单位：石油勘探开发研究院、石油工程技术研究院</span>
                                <span class="layui-lab-span">中国石化页岩油气勘探开发重点实验室</span>
                            </a>
                        </div>
                        <div>
                            <span class="layui-lab-span">聚烯烃国家工程研究中心</span>
                            <span class="layui-text-span">依托单位：北京化工研究院</span>
                        </div>
                        <div>
                            <span class="layui-text-span">依托单位：石油化工科学研究院</span>
                            <span class="layui-lab-span">石油化工催化材料与反应工程国家重点实验室</span>
                        </div>
                        <div>
                            <span class="layui-lab-span">橡塑新型材料合成国家工程研究中心</span>
                            <span class="layui-text-span">依托单位：北京化工研究院</span>
                        </div>
                        <div>
                            <span class="layui-text-span">依托单位：上海石油化工研究院</span>
                            <span class="layui-lab-span">绿色化工与工业催化国家重点实验室</span>
                        </div>
                        <div>
                            <span class="layui-lab-span">基本有机原料催化剂国家工程研究中心</span>
                            <span class="layui-text-span">依托单位：上海石油化工研究院</span>
                        </div>

                        <div>
                            <span class="layui-text-span">依托单位：青岛安全工程研究院</span>
                            <span class="layui-lab-span">化学品安全控制国家重点实验室</span>
                        </div>
                        <div>
                            <span class="layui-lab-span">国家地热能源开发利用研究及应用技术推广中心</span>
                            <span class="layui-text-span">依托单位：新星石油有限责任公司</span>
                        </div>

                        <div>
                            <span class="layui-text-span">依托单位：上海石油化工股份有限公司</span>
                            <span class="layui-lab-span">合成纤维国家工程研究中心</span>
                        </div>
                        <div>
                            <span class="layui-lab-span">国家能源页岩油技术研发中心</span>
                            <span class="layui-text-span">依托单位：石油勘探开发研究院、胜利油田分公司、石油工程技术研究院</span>
                        </div>

                        <div>
                            <span class="layui-text-span">依托单位：石油化工科学研究院</span>
                            <span class="layui-lab-span">炼油工艺与催化剂国家工程研究中心</span>
                        </div>
                        <div>
                            <span class="layui-lab-span">国家能源石油炼制技术研发（实验）中心</span>
                            <span class="layui-text-span">依托单位：石油化工科学研究院</span>
                        </div>-->
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-card layui-petrifaction">
            <div class="layui-card-header-lab layui-card-header-r">
                中石化重点实验室
            </div>
            <div class="layui-card-body prospecting">
                <div class="layui-tab layui-tab-brief" lay-filter="component-tabs-hash">
                    <ul class="layui-tab-title">
                        <li class="layui-this" lay-id="11">勘探开发</li>
                        <li lay-id="22">石油炼制</li>
                        <li lay-id="33">石油化工</li>
                        <li lay-id="33">公共技术</li>
                    </ul>
                    <div class="layui-tab-content">
                        <div class="layui-tab-item layui-show exploration">
                            <table id="exploration" class="layui-table" lay-filter="exploration"></table>
                        </div>
                        <div class="layui-tab-item refine">
                            <table id="refine" class="layui-table" lay-filter="refine"></table>
                        </div>
                        <div class="layui-tab-item chemical">
                            <table id="chemical" class="layui-table" lay-filter="chemical"></table>
                        </div>
                        <div class="layui-tab-item technology">
                            <table id="technology" class="layui-table" lay-filter="technology"></table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    layui.use(['jquery', 'table', 'laydate', 'layer','publicMethods','element'], function () {
        var $ = layui.jquery, table = layui.table, laydate = layui.laydate, layer = layui.layer,publicMethods=layui.publicMethods,element=layui.element;
        //国家级
        function renderTable(id,url,where) {
            var lodingMsg = layer.msg('数据加载中....');
            //渲染
            table.render({
                elem : '#'+id,
                url : url,
                method : "get",
                where : where,
                limit : 10,
                id : id,
                height : commonDislodgeTable()-200,
                page : {
                    groups : 5,
                    limits : [ 10, 15, 30, 45, 60 ],
                    layout : [ 'count', 'limit', 'prev', 'page', 'next', 'skip' ], //自定义分页布局
                    first : '首页', //不显示首页
                    last : '尾页', //不显示尾页
                    theme : '#0F9EE0'
                },
                cols : [ [  {
                    title : '序号',
                    type : 'numbers',
                    width : 45
                }, {
                    field : 'orgName',
                    title : '实验室名称',
                    width : '44%',
                    style : 'cursor: pointer;'
                }, {
                    field : 'dependentUnit',
                    title : '依托单位',
                    style : 'cursor: pointer;'
                }]],
                done : function(res, curr, count) {
                    console.log(res)
                    layer.close(lodingMsg);
                }
            });
            $(".layui-table-header table thead th input").remove(); //移除表头的复选框,去掉全选
        }
        renderTable("exploration",'/layuiadmin/json/json1.json',{param:{"bak1":"国家级研发机构"}});
        renderTable("refine",'/layuiadmin/json/json2.json',{param:{"bak1":"国家级研发机构"}});
        renderTable("chemical",'/layuiadmin/json/json3.json',{param:{"bak1":"国家级研发机构"}});
        renderTable("technology",'/layuiadmin/json/json4.json',{param:{"bak1":"国家级研发机构"}});
        publicMethods.ajaxAsyncPost("/laboratoryBase/listByBak1",{"bak1":"国家级研发机构"}, function (data) {
            var number=data.length;
            $.each(data,function(i,d){
                var html ='<div>'+
                    '<a href="/instituteIndex?url=/laboratoryBase/laboratoryBaseDetails/'+d.dataId+'" target="_blank">'+
                    '<span class="layui-lab-span">'+d.orgName+'</span>'+
                    '<span class="layui-text-span">依托单位：'+d.dependentUnit+'</span>'+
                    '</a>'+
                    '</div>';
                $("#countryUnit").append(html);
                if(i==(number-1)){
                    console.log($(".layui-country-div div").eq(i-1))
                    $(".layui-country-div div").eq(i-1).addClass("borderB");
                    $(".layui-country-div div").eq(i-2).addClass("borderB");
                    $(".layui-country-div div").eq(i).addClass("borderB");
                }
            });
        });
    });
</script>
</body>
</html>