<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge">-->
    <!--<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">-->

    <link rel="stylesheet" type="text/css" href="/layuiadmin/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/style/common.css">
    <script type="text/javascript" src="/plugins/jQuery/jQuery-2.2.0.min.js"></script>
    <script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
    <script type="text/javascript" src="/common/js/base.js"></script>
</head>
<body>
<body>
<div class="skill">
    <div class="skill-left">
        <ul>
            <li class="layui-this" onclick="changeTfcCode('@10@10001@');">勘探开发</li>
            <li onclick="changeTfcCode('@10@10002@');">石油炼制</li>
            <li onclick="changeTfcCode('@10@10003@');">石油化工</li>
            <li onclick="changeTfcCode('@10@10004@');">催化剂</li>
        </ul>
        <div class="layui-tab-item layui-show">
            <div class="layui-card-body">
                <div class="layui-tab">
                    <ul class="layui-tab-title">
                        <li class="layui-this">项目</li>
                        <li>成果</li>
                        <li>专利</li>
                        <li>人员</li>
                        <li>费用</li>
                    </ul>
                    <div class="layui-tab-content">
                        <div class="layui-tab-item layui-show">
                            <div class="lan">
                                <table id="indexOutProjectInfoTableId" class="layui-hide" lay-filter="tableEvent"></table>
                            </div>
                        </div>
                        <div class="layui-tab-item">
                            <table id="indexOutAppraisalTableId" class="layui-hide" lay-filter="tableEvent"></table>
                        </div>
                        <div class="layui-tab-item">
                            <table id="indexOutPatentTableId" class="layui-hide" lay-filter="tableEvent"></table>
                        </div>
                        <div class="layui-tab-item">
                            <table id="indexOutProjectInfoTableIdRy" class="layui-hide" lay-filter="tableEvent"></table>
                        </div>
                        <div class="layui-tab-item">
                            <table id="indexOutProjectInfoTableIdFy" class="layui-hide" lay-filter="tableEvent"></table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--右侧-->
    <div class="skill-right">111</div>
</div>

<script>
    var tfcCode = "@10@10001@";

    function changeTfcCode(code) {
        tfcCode = code;
        renderTable();
        renderTableZl();
        renderTableCg();
        renderTableRy();
        renderTableJf();
    }
</script>
<script>
    var param = JSON.parse(window.localStorage.getItem("param"));
    var table, selectRowData, workOrderStatus, publicMethods;
    layui.use(['jquery', 'form', 'laydate', 'table', 'layer', 'publicMethods', 'element'], function () {
        table = layui.table;
        publicMethods = layui.publicMethods;
        var $ = layui.jquery, layer = layui.layer, laypage = layui.laypage;
        $(".skill-left>ul li").click(function () {
            $(".skill-left>ul li").removeClass("layui-this");
            $(this).addClass("layui-this");
        });
        $(".layui-tab-content").css("height", (parseInt(parent.$("#LAY_app_body .layui-show iframe").height()) - 132) + "px");
        //人员
        var colsRy =
            [
                {type: 'checkbox', event: 'changeEvents', width: 55},
                {title: '序号', type: 'numbers', width: 55},
                {
                    field: "fzrxm",
                    title: "负责人", event: 'setActive', style: 'cursor: pointer;'
                }
            ];

        function renderTableRy() {
            var where = {
                param:
                    {
                        "typeIndex": tfcCode
                        , "type": "ry"
                    }
            };
            publicMethods.tableRender('indexOutProjectInfoTableIdRy', 'indexOutProjectInfoTableIdRy', '/indexOutProjectInfo/getTableData', false, colsRy, where, false, function (res, curr, count) {
                $('.layui-table-box').find('.layui-table-body').find("table").find("tbody").children("tr").on('click', function () {
                    var index = parseInt($(this).index() + 1);
                    $('tr').removeClass('layui-table-click');
                    $(this).addClass('layui-table-click');
                    $('tr').find("td").find(".layui-unselect").removeClass("layui-form-checked")
                    $('tr:eq(' + index + ')').find("td").eq(0).find(".layui-unselect").addClass("layui-form-checked");
                    selectRowData = res.data[index - 1];
                });
                selectRowData = "";
            });
        }

        renderTableRy();
        window.renderTableRy = renderTableRy;
        //经费
        var colsJf =
            [
                {type: 'checkbox', event: 'changeEvents', width: 55},
                {title: '序号', type: 'numbers', width: 55},
                {
                    field: "xmmc",
                    title: "项目名称", event: 'setActive', style: 'cursor: pointer;', width: 300
                },
                {
                    field: "yshf",
                    title: "实际花费", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "jf",
                    title: "项目经费总额", event: 'setActive', style: 'cursor: pointer;', width: 100
                }
            ];

        function renderTableJf() {
            var where = {
                param:
                    {
                        "typeIndex": tfcCode
                        , "type": "fy"
                    }
            };
            publicMethods.tableRender('indexOutProjectInfoTableIdFy', 'indexOutProjectInfoTableIdFy', '/indexOutProjectInfo/getTableData', false, colsJf, where, false, function (res, curr, count) {
                $('.layui-table-box').find('.layui-table-body').find("table").find("tbody").children("tr").on('click', function () {
                    var index = parseInt($(this).index() + 1);
                    $('tr').removeClass('layui-table-click');
                    $(this).addClass('layui-table-click');
                    $('tr').find("td").find(".layui-unselect").removeClass("layui-form-checked")
                    $('tr:eq(' + index + ')').find("td").eq(0).find(".layui-unselect").addClass("layui-form-checked");
                    selectRowData = res.data[index - 1];
                });
                selectRowData = "";
            });
        }

        renderTableJf();
        window.renderTableJf = renderTableJf;
        //项目
        var cols =
            [
                {type: 'checkbox', event: 'changeEvents', width: 55},
                {title: '序号', type: 'numbers', width: 55},
                {
                    field: "nd",
                    title: "年度", event: 'setActive', style: 'cursor: pointer;', width: 55
                },
                {
                    field: "hth",
                    title: "合同号", event: 'setActive', style: 'cursor: pointer;', width: 100
                },
                {
                    field: "xmmc",
                    title: "项目名称", event: 'setActive', style: 'cursor: pointer;', width: 300
                },
                {
                    field: "jf",
                    title: "项目经费总额", event: 'setActive', style: 'cursor: pointer;', width: 100
                },
                {
                    field: "kssj",
                    title: "开始时间", event: 'setActive', style: 'cursor: pointer;', width: 100
                }
            ];

        function renderTable() {
            var where = {
                param:
                    {
                        "typeIndex": tfcCode
                    }
            };
            publicMethods.tableRender('indexOutProjectInfoTableId', 'indexOutProjectInfoTableId', '/indexOutProjectInfo/getTableData', false, cols, where, true, function (res, curr, count) {
                $('.layui-table-box').find('.layui-table-body').find("table").find("tbody").children("tr").on('click', function () {
                    var index = parseInt($(this).index() + 1);
                    $('tr').removeClass('layui-table-click');
                    $(this).addClass('layui-table-click');
                    $('tr').find("td").find(".layui-unselect").removeClass("layui-form-checked")
                    $('tr:eq(' + index + ')').find("td").eq(0).find(".layui-unselect").addClass("layui-form-checked");
                    selectRowData = res.data[index - 1];
                });
                selectRowData = "";
            });
        }

        renderTable();
        window.renderTable = renderTable;

        //成果
        var colsCg =
            [
                {type: 'checkbox', event: 'changeEvents', width: 55},
                {title: '序号', type: 'numbers', width: 55},
                {
                    field: "cgid",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "nd",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "cgmc",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "sqjddw",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "sqdjh",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "starttime",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "endtime",
                    title: "", event: 'setActive', style: 'cursor: pointer;'
                }
            ];

        function renderTableCg() {
            var where = {
                param:
                    {
                        "typeIndex": tfcCode
                    }
            };
            publicMethods.tableRender('indexOutAppraisalTableId', 'indexOutAppraisalTableId', '/indexOutAppraisal/getTableData', false, colsCg, where, true, function (res, curr, count) {
                $('.layui-table-box').find('.layui-table-body').find("table").find("tbody").children("tr").on('click', function () {
                    var index = parseInt($(this).index() + 1);
                    $('tr').removeClass('layui-table-click');
                    $(this).addClass('layui-table-click');
                    $('tr').find("td").find(".layui-unselect").removeClass("layui-form-checked")
                    $('tr:eq(' + index + ')').find("td").eq(0).find(".layui-unselect").addClass("layui-form-checked");
                    selectRowData = res.data[index - 1];
                });
            });
        }

        renderTableCg();
        window.renderTableCg = renderTableCg;

        var colsZl =
            [
                {type: 'checkbox', event: 'changeEvents', width: 55},
                {title: '序号', type: 'numbers', width: 55},
                {
                    field: "sqh",
                    title: "申请号", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "sqri",
                    title: "申请日", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "fmmc",
                    title: "发明名称", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "shenqr",
                    title: "申请人", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "fmr",
                    title: "发明人", event: 'setActive', style: 'cursor: pointer;'
                },
                {
                    field: "zlh",
                    title: "专利号", event: 'setActive', style: 'cursor: pointer;'
                }
            ];

        function renderTableZl() {

            var where = {
                param:
                    {
                        "typeIndex": tfcCode
                    }
            };
            publicMethods.tableRender('indexOutPatentTableId', 'indexOutPatentTableId', '/indexOutPatent/getTableData', false, colsZl, where, true, function (res, curr, count) {
                $('.layui-table-box').find('.layui-table-body').find("table").find("tbody").children("tr").on('click', function () {
                    var index = parseInt($(this).index() + 1);
                    $('tr').removeClass('layui-table-click');
                    $(this).addClass('layui-table-click');
                    $('tr').find("td").find(".layui-unselect").removeClass("layui-form-checked")
                    $('tr:eq(' + index + ')').find("td").eq(0).find(".layui-unselect").addClass("layui-form-checked");
                    selectRowData = res.data[index - 1];
                });
            });
        }

        renderTableZl();
        window.renderTableZl = renderTableZl;
    });
</script>

</body>
</html>