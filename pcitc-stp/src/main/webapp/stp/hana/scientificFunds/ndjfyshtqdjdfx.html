<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/adminStp.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/mainStp.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/common.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/second.css" media="all">
</head>
<body >
<div class="layui-fluid">
    <h3>预算合同签订进度分析</h3>
    <div class="layui-main-oil">
        <div class="searchBox">
            <input type="hidden" name="days" value="${days}"  id="days">
            <!--查询条件-->
            <label class="dateInput">
                <span>月份</span>
                <input type="text" name="month" placeholder="请选择月份" title="月份" value="${month}" autocomplete="off" class="form-control" id="month">
            </label>
            <div class="layui-input-inline">
                <select name="companyCode" id="companyCode" >
                    <#list companyCodeList as vo>
                        <#if vo.g0GSJC == '全部'>
                        <option value="${vo.g0GSDM}"  selected="selected">${vo.g0GSJC}</option>
                        </#if>
                        <#if vo.g0GSJC != '全部'>
                            <option value="${vo.g0GSDM}">${vo.g0GSJC}</option>
                        </#if>
                    </#list>
                </select>
            </div>
            <!--按钮组-->
            <div class="btnGroup">
                <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" onclick="search_Event()" data-type="searchEvent">查询</button>
            </div>
            <span class="unitBox">单位：万元</span>
        </div>
        <div class="layui-row layui-col-space10">
            <div class="layui-col-sm7">
                <div class="layui-card">
                    <div class="layui-card-header">
                        <span class="layui-time"></span>科研年度资金三年趋势分析
                    </div>
                    <div class="layui-row-main">
                        <div class="main-chart" id="main1" style="height:280px;width: 100%;"></div>
                    </div>
                </div>
            </div>
            <div class="layui-col-sm5">
                <div class="layui-card">
                    <div class="layui-card-header">
                        <span class="layui-time"></span>科技经费预算签订进度
                    </div>
                    <div class="layui-row-main">
                        <div class="main-chart" id="main2" style="height:280px;width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row layui-col-space10">
            <div class="layui-col-sm7">
                <div class="layui-card">
                    <div class="layui-card-header">
                        <span class="layui-time"></span>科技经费预算签订进度按直属研究院分析
                    </div>
                    <div class="layui-row-main">
                        <div class="main-chart" id="main3" style="height:280px;width: 100%;"></div>
                    </div>
                </div>
            </div>
            <div class="layui-col-sm5">
                <div class="layui-card">
                    <div class="layui-card-header">
                        <span class="layui-time"></span>合同经费签订金额按直属研究院占比分析
                    </div>
                    <div class="layui-row-main">
                        <div class="main-chart" id="main4" style="height:280px;width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row layui-col-space10">
            <div class="layui-col-sm7">
                <div class="layui-card">
                    <div class="layui-card-header">
                        <span class="layui-time"></span>科技经费预算签订进度按专业类别分析
                    </div>
                    <div class="layui-row-main">
                        <div class="main-chart" id="main5" style="height:280px;width: 100%;"></div>
                    </div>
                </div>
            </div>
            <div class="layui-col-sm5">
                <div class="layui-card">
                    <div class="layui-card-header">
                        <span class="layui-time"></span>合同经费签订金额按专业类别占比分析
                    </div>
                    <div class="layui-row-main">
                        <div class="main-chart" id="main6" style="height:280px;width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--<div class="searchBox">
    <input type="hidden" name="days" value="${days}"  id="days">
    &lt;!&ndash;查询条件&ndash;&gt;
    <label class="dateInput">
        <span>月份</span>
        <input type="text" name="month" placeholder="请选择月份" title="月份" value="${month}" autocomplete="off" class="form-control" id="month">
    </label>
    <div class="layui-input-inline">
      <select name="companyCode" id="companyCode" >
           <#list companyCodeList as vo>
           	 <#if vo.g0GSJC == '全部'>
           	 	<option value="${vo.g0GSDM}"  selected="selected">${vo.g0GSJC}</option>
           	 </#if>
              <#if vo.g0GSJC != '全部'>
           	 	<option value="${vo.g0GSDM}">${vo.g0GSJC}</option>
           	 </#if>
            </#list>
         </select>
    </div>
    &lt;!&ndash;按钮组&ndash;&gt;
    <div class="btnGroup">
        <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" onclick="search_Event()" data-type="searchEvent">查询</button>
    </div>
    <span class="unitBox">单位：万元</span>
</div>-->
<!--echarts-->
<!--<div class="content-body container">
         &lt;!&ndash;图表二比一布局&ndash;&gt;
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main1" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main2" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
         &lt;!&ndash;图表二比一布局&ndash;&gt;
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main3" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main4" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
        &lt;!&ndash;图表二比一布局&ndash;&gt;
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main5" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main6" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
	</div>-->
<!--表格数据操作js-->
<script src="/common/js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
<script src="/common/js/layer-v3.1.1/layer.js"></script>
<script type="text/javascript" src="/plugins/echarts/echarts.min.js"></script>
<script type="text/javascript" src="/plugins/echarts/walden.js"></script>	
<script type="text/javascript" src="/stp/hana/common/stp_common_line.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_bar.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_pie.js"></script>
<script type="text/javascript">
layui.config({
    base: '/layuiadmin/module/modules/' 
}).use(['jquery','form', 'laydate','table','laypage'], function(){
	  $ = layui.jquery
      ,table = layui.table
      ,form = layui.form
      ,laydate = layui.laydate
	  form.render(null, 'component-form-group');
            laydate.render({
               elem: '#month'
               ,format: 'yyyyMM'
            });
      var monthValY=$("#month").val().substring(4,0);
      var monthValM=$("#month").val().substring(4);
      $(".layui-time").html(monthValY+"年"+monthValM+"月");
});


function init()
{
        var monthValY=$("#month").val().substring(4,0);
        var monthValM=$("#month").val().substring(4);
        $(".layui-time").html(monthValY+"年"+monthValM+"月");
		var allCode="${allCode?default('')}";
		var allCode_text="全部院所";
		var v_date=(new Date()).getTime();
		var month=$('#month').val();
		var companyCode=$('#companyCode').val();
		var monthstr=getNowFormatDate($('#month').val());
		var checkText=$("#companyCode").find("option:selected").text();
		if(checkText=='全部')
		{
			checkText="全部院所";
		}
		

		var seriesData_1= [
	        {
	            name:'2016',
	            type:'bar',
	            color: ['#37A2DA'],
	            data:[22, 14, 24, 84]
	        },
	        {
	            name:'2017',
	            type:'bar',
	            color: ['#67E0E3'],
	            data:[22, 44, 14, 24]
	        },
	        
	        {
	            name:'2018',
	            type:'line',
	            itemStyle : {  /*设置折线颜色*/
                    normal : {
                        color:'#c4cddc'
                    }
                },
	            data:[12, 93, 32, 12]
	        }
	        
	        
	    ];
  
		  var yAxis1= [
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        },
  		        {
  		            type: 'value',
  		            name: '同比',
  		            min: 0,
  		            max: 100,
  		            axisLabel: {
  		                formatter: '{value} %'
  		            }
  		        }
  		    ];
		var legends_1=['2016','2017','2018'];
		var xAxisData_1=['年度经费预算','合同经费签订','年度经费拨付','本年经费支出'];
        load_mutl_bar_yy("main1","",legends_1,xAxisData_1,yAxis1,seriesData_1,"");
		
		
		
		main2(monthstr);
		
		

		var seriesData_2= [
	        {
	            name:'同期',
	            type:'bar',
	            color: ['#37A2DA'],
	            data:[22, 44, 74, 24,22,22,22, 414]
	        },
	        {
	            name:'本期',
	            type:'bar',
	            color: ['#67E0E3'],
	            data:[22, 44, 14, 24,422,62,72, 414]
	        },
	        
	        {
	            name:'同比',
	            type:'line',
	            itemStyle : {  /*设置折线颜色*/
                    normal : {
                        color:'#c4cddc'
                    }
                },
	            data:[12, 93, 32, 12,12,12, 93, 32]
	        }
	        
	        
	    ];
  
		  var yAxis2= [
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        },
  		        {
  		            type: 'value',
  		            name: '同比',
  		            min: 0,
  		            max: 100,
  		            axisLabel: {
  		                formatter: '{value} %'
  		            }
  		        }
  		    ];
		var legends_2=['同期','本期','同比'];
		var xAxisData_2=['石勘院','物探院','工程院','石科院','抚研院','北化院','上海院','安工院'];
        load_mutl_bar_yy("main3","",legends_2,xAxisData_2,yAxis2,seriesData_2,"");
		
		
		
		
		
		var legend_names_3=['石勘院','物探院','工程院','石科院','抚研院','北化院','上海院','安工院'];
		var series_values_3=[
			 {value:135, name:'石勘院'},
             {value:210, name:'物探院'},
             {value:134, name:'工程院'},
             {value:134, name:'石科院'},
             {value:134, name:'抚研院'},
             {value:134, name:'北化院'},
             {value:134, name:'上海院'},
             {value:134, name:'安工院'}
		];
		loadPie_tt('main4','',legend_names_3,series_values_3,"");
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		var seriesData_5= [
	        {
	            name:'年度经费预算',
	            type:'bar',
	            color: ['#37A2DA'],
	            data:[22, 44, 74, 24,22,22,22, 414,72, 414]
	        },
	        {
	            name:'合同经费签订',
	            type:'bar',
	            color: ['#67E0E3'],
	            data:[22, 44, 14, 24,422,62,72, 414,72, 414]
	        },
	        
	        {
	            name:'合同签订%',
	            type:'line',
	            itemStyle : {  /*设置折线颜色*/
                    normal : {
                        color:'#c4cddc'
                    }
                },
	            data:[12, 93, 32, 12,12,12, 93, 32, 93, 32]
	        }
	        
	        
	    ];
  
		  var yAxis5= [
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        },
  		        {
  		            type: 'value',
  		            name: '同比',
  		            min: 0,
  		            max: 100,
  		            axisLabel: {
  		                formatter: '{value} %'
  		            }
  		        }
  		    ];
		var legends_5=['年度经费预算','合同经费签订','合同签订%'];
		var xAxisData_5=['油田处','炼油处','化工处','合成材料处','装备储运处 ','国际合作处','三剂管理处','知识产权处','技术监督处 ','知识产权处'];
        load_mutl_bar_yy("main5","",legends_5,xAxisData_5,yAxis5,seriesData_5,"");
		
		
		
		
		var legend_names_6=['油田处','炼油处','化工处','合成材料处','装备储运处 ','国际合作处','三剂管理处','知识产权处','技术监督处 ','知识产权处'];
		var series_values_6=[
			 {value:135, name:'油田处'},
             {value:210, name:'炼油处'},
             {value:134, name:'化工处'},
             {value:134, name:'合成材料处'},
             {value:134, name:'装备储运处'},
             {value:134, name:'国际合作处'},
             {value:134, name:'三剂管理处'},
             {value:134, name:'知识产权处'},
             {value:134, name:'技术监督处'},
             {value:134, name:'知识产权处'}
		];
		loadPie_tt('main6','',legend_names_6,series_values_6,"");
		
		
		
		
		
	
}










function main2(subtext)
{
        
        
        
        var myChart2 = echarts.init(document.getElementById('main2'));
        var option2 = {
        		
        		 title: {
                     text: '',
                     x:'center',
                     y: '10px',
         	         textStyle: {
         	            fontSize: 15,
         	            fontWeight: 'normal',
         	            color: '#000000'       
         	        },
         	        subtextStyle: {
         	            color: '#7B7B7B'        
         	        },
         	        subtext:''
                 },
        	    tooltip : {
        	        formatter: "{a} <br/>{b} : {c}%"
        	    },
        	    toolbox: {
        	        feature: {
        	            restore: {},
        	            saveAsImage: {}
        	        }
        	    },
        	    series: [
        	        {
        	            name: '业务指标',
        	            type: 'gauge',
        	            detail: {formatter:'{value}%'},
        	            data: [{value: 50, name: '完成率'}]
        	        }
        	    ]
        	};

        	setInterval(function () {
        	    option.series[0].data[0].value = (Math.random() * 100).toFixed(2) - 0;
        	    myChart.setOption(option, true);
        	},2000);
        	//option2.title.subtext=subtext;
        myChart2.setOption(option2);
        
}  

init();
        

        
        
        
        
        
        function search_Event()
        {
        	init();
        }
            
           
    </script>
</body>
</html>
