<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/common.css">
    <link rel="stylesheet" href="/common/css/echart-common.css">
</head>
<body>  
<div class="searchBox">
    <!--查询条件-->
        <label class="dateInput">
            <span>月份</span>
            <input type="text" name="month" placeholder="请选择月份" title="月份" value="${month}" autocomplete="off" class="form-control" id="month">
        </label>
       <div class="layui-input-inline">
         <select name="companyCode" id="companyCode" >
              <#list companyCodeList as vo>
              	 <#if vo.g0GSJC == '全部'>
              	 	<option value="${vo.g0GSDM}"  selected="selected">${vo.g0GSJC}</option>
              	 </#if>
                 <#if vo.g0GSJC != '全部'>
              	 	<option value="${vo.g0GSDM}">${vo.g0GSJC}</option>
              	 </#if>
               </#list>
            </select>
       </div>
       <form class="layui-form layui-form1">
            <div class="layui-input-inline">
                <#list projectCodeList as vo>
                   <input type="checkbox" name="like[write]" lay-skin="primary" title="${vo.g0XMGLLX}" checked="">
                </#list>
            </div>
        </form>

       
       
    <!--按钮组-->
    <div class="btnGroup">
        <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" onclick="search_Event()" data-type="searchEvent">查询</button>
    </div>
    <span class="unitBox">单位：万元</span>
</div>



<!--echarts-->
<div class="content-body container">

     <div class="one-chart-box">
         <div class="layui-row echarts">
             <div id="main1" style="width: 100%;height: 400px;"></div>
         </div>
     </div>
     <div class="three-charts-box">
            <div class="layui-row">
                <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 echarts">
                    <div id="main2" style="width: 100%;height: 400px;"></div>
                </div>
                <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 echarts">
                    <div id="main3" style="width: 100%;height: 400px;"></div>
                </div>
                <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 echarts">
                    <div id="main4" style="width: 100%;height: 400px;"></div>
                </div>
            </div>
     </div> 
     <!--图表二比一布局-->
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main5" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main6" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
     
     <!--图表二比一布局-->
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main7" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main8" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
     
     
</div>



<!--表格数据操作js-->
<script src="/common/js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
<script src="/common/js/layer-v3.1.1/layer.js"></script>
<script type="text/javascript" src="/plugins/echarts/echarts.min.js"></script>
<script type="text/javascript" src="/plugins/echarts/walden.js"></script>	
<script type="text/javascript" src="/stp/hana/common/stp_common_line.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_bar.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_pie.js"></script>
<script type="text/javascript">

layui.config({
    base: '/layuiadmin/module/modules/' 
}).use(['jquery','form', 'laydate','table','laypage'], function(){
	  $ = layui.jquery
      ,table = layui.table
      ,form = layui.form
      ,laydate = layui.laydate
	  form.render(null, 'component-form-group');
            laydate.render({
               elem: '#month'
               ,format: 'yyyyMM'
            });
});


function init()
{
		var allCode="${allCode?default('')}";
		var allCode_text="全部院所";
		var v_date=(new Date()).getTime();
		var month=$('#month').val();
		var companyCode=$('#companyCode').val();
		var monthstr=getNowFormatDate($('#month').val());
		var checkText=$("#companyCode").find("option:selected").text();
		if(checkText=='全部')
		{
			checkText="全部院所";
		}
        
        var legends=['实际支出', '预算批复', '预算结余'];
        var yAxisData=['职工薪酬','办公费','会议费','设备采购费','化验费'];
        var seriesData= [
	        {
	            name:'实际支出',
	            type:'bar',
	            label: {
	                normal: {
	                    show: true,
	                    position: 'inside'
	                }
	            },
	            data:[200, 170, 240, 244, 200]
	        },
	        {
	            name:'预算批复',
	            type:'bar',
	            stack: '总量',
	            label: {
	                normal: {
	                    show: true
	                }
	            },
	            data:[320, 302, 341, 374, 390]
	        },
	        {
	            name:'预算结余',
	            type:'bar',
	            stack: '总量',
	            label: {
	                normal: {
	                    show: true,
	                    position: 'left'
	                }
	            },
	            data:[-120, -132, -101, -134, -190]
	        }
	    ];
        load_bar_zhengfu_tt('main1',"科研经费支出按课题类型全成本分析",monthstr,legends,yAxisData,seriesData);
        
        var seriesData_2= [
	        {
	            name:'预算批复',
	            type:'bar',
	            color: ['#37A2DA'],
	            data:[22, 44, 74, 24]
	        },
	        {
	            name:'实际支出',
	            type:'bar',
	            color: ['#67E0E3'],
	            data:[22, 24, 74, 54]
	        },
	        
	        {
	            name:'使用率',
	            type:'line',
	            itemStyle : {  /*设置折线颜色*/
                    normal : {
                        color:'#c4cddc'
                    }
                },
	            data:[1.2, 2.3, 32.2, 1.2]
	        }
	        
	    ];
		  var yAxis2= [
		        {
  		            type: 'value',
  		            name: '金额（万元）',
  		            min: 0,
  		            max: 250,
  		            axisLabel: {
  		                formatter: '{value}'
  		            }
  		        },
  		        {
  		            type: 'value',
  		            name: '使用率',
  		            min: 0,
  		            max: 100,
  		            axisLabel: {
  		                formatter: '{value} %'
  		            }
  		        }
  		    ];
		var legends_2=['预算批复','实际支出','使用率'];
		var xAxisData_2= ['国家项目','重大项目','十条龙','其他'];
		load_mutl_bar_tt("main2","科研经费支出按按项目类型分析",legends_2,xAxisData_2,yAxis2,seriesData_2,monthstr);
		
		
		
		
		
		
		
		 var seriesData_3= [
		        {
		            name:'预算批复',
		            type:'bar',
		            color: ['#37A2DA'],
		            data:[22, 44, 74, 24]
		        },
		        {
		            name:'实际支出',
		            type:'bar',
		            color: ['#67E0E3'],
		            data:[22, 24, 74, 54]
		        },
		        
		        {
		            name:'使用率',
		            type:'line',
		            itemStyle : {  /*设置折线颜色*/
                        normal : {
                            color:'#c4cddc'
                        }
                    },
		            data:[1.2, 2.3, 32.2, 1.2]
		        }
		        
		    ];
			  var yAxis3= [
			        {
	  		            type: 'value',
	  		            name: '金额（万元）',
	  		            min: 0,
	  		            max: 250,
	  		            axisLabel: {
	  		                formatter: '{value}'
	  		            }
	  		        },
	  		        {
	  		            type: 'value',
	  		            name: '使用率',
	  		            min: 0,
	  		            max: 100,
	  		            axisLabel: {
	  		                formatter: '{value} %'
	  		            }
	  		        }
	  		    ];
			var legends_3=['预算批复','实际支出','使用率'];
			var xAxisData_3= ['国家项目','总部项目','企业项目','其他'];
			load_mutl_bar_tt("main3","科研经费支出按资金来源分析",legends_3,xAxisData_3,yAxis3,seriesData_3,monthstr);
		
        
			 var seriesData_4= [
 		        {
		            name:'预算批复',
		            type:'bar',
		            color: ['#37A2DA'],
		            data:[22, 44, 74, 24]
		        },
		        {
		            name:'实际支出',
		            type:'bar',
		            color: ['#67E0E3'],
		            data:[22, 24, 74, 54]
		        },
		        
		        {
		            name:'使用率',
		            type:'line',
		            itemStyle : {  /*设置折线颜色*/
                        normal : {
                            color:'#c4cddc'
                        }
                    },
		            data:[1.2, 2.3, 32.2, 1.2]
		        }
		        
		    ];
				  var yAxis4= [
				        {
		  		            type: 'value',
		  		            name: '金额（万元）',
		  		            min: 0,
		  		            max: 250,
		  		            axisLabel: {
		  		                formatter: '{value}'
		  		            }
		  		        },
		  		        {
		  		            type: 'value',
		  		            name: '使用率',
		  		            min: 0,
		  		            max: 100,
		  		            axisLabel: {
		  		                formatter: '{value} %'
		  		            }
		  		        }
		  		    ];
				var legends_4=['预算批复','实际支出','使用率'];
				var xAxisData_4=  ['A','B1','B2','C'];
				load_mutl_bar_tt("main4","科研经费支出按管理级别分析",legends_4,xAxisData_4,yAxis4,seriesData_4,monthstr);
				
				
				
				
				
				 var seriesData_5= [
	    		        {
	    		            name:'预算批复',
	    		            type:'bar',
	    		            color: ['#37A2DA'],
	    		            data:[22, 44, 74, 24,22, 44, 74, 44, 24,22, 44, 94, 24]
	    		        },
	    		        {
	    		            name:'实际支出',
	    		            type:'bar',
	    		            color: ['#67E0E3'],
	    		            data:[22, 44, 74, 24,22, 44, 74, 24, 24,22, 84, 74, 24]
	    		        },
	    		        {
	    		            name:'同期支出',
	    		            type:'bar',
	    		            color: ['#67E0E3'],
	    		            data:[22, 44, 74, 24,22, 24, 74, 24, 24,22, 44, 74, 24]
	    		        },
	    		        {
	    		            name:'使用率',
	    		            type:'line',
	    		            itemStyle : {  /*设置折线颜色*/
	                            normal : {
	                                color:'#c4cddc'
	                            }
	                        },
	    		            data:[1.2, 2.3, 32.2, 1.2,1.2, 2.3, 32.2, 1.2,1.2, 2.3, 32.2, 1.2, 1.2]
	    		        }
	    		        
	    		    ];
						  var yAxis5= [
						        {
				  		            type: 'value',
				  		            name: '金额（万元）',
				  		            min: 0,
				  		            max: 250,
				  		            axisLabel: {
				  		                formatter: '{value}'
				  		            }
				  		        },
				  		        {
				  		            type: 'value',
				  		            name: '使用率',
				  		            min: 0,
				  		            max: 100,
				  		            axisLabel: {
				  		                formatter: '{value} %'
				  		            }
				  		        }
				  		    ];
						var legends_5=['预算批复','实际支出','同期支出','使用率'];
						var xAxisData_5= ['设备费用','材料费用','测试费用','燃动力费用','差旅费','会议费','国际交流','信息费','劳务费','咨询费','基建费','间接费','不可预见费'];
						load_mutl_bar_tt("main5","科研经费支出按费用类型分析",legends_5,xAxisData_5,yAxis5,seriesData_5,monthstr);
						
			

						var legend_names_6=['设备费用','材料费用','测试费用','燃动力费用','差旅费','会议费','国际交流','信息费','劳务费','咨询费','基建费','间接费','不可预见费'];
						var series_values_6=[
							 {value:135, name:'设备费用'},
	        	                {value:210, name:'材料费用'},
	        	                {value:134, name:'测试费用'},
	        	                {value:134, name:'燃动力费用'},
	        	                {value:134, name:'差旅费'},
	        	                {value:134, name:'会议费'},
	        	                {value:134, name:'国际交流'},
	        	                {value:134, name:'信息费'},
	        	                {value:134, name:'劳务费'},
	        	                {value:134, name:'咨询费'},
	        	                {value:134, name:'基建费'},
	        	                {value:134, name:'间接费'},
	        	                {value:134, name:'不可预见费'}
						];
						loadPie_tt('main6','科研经费支出按费用类型占比分析',legend_names_6,series_values_6,monthstr); 
						
						var legend_names_8=['石勘院','物探院','工程院','石科院','抚研院','北化院','上海院','安工院'];
						var series_values_8=[
							{value:135, name:'石勘院'},
        	                {value:210, name:'物探院'},
        	                {value:134, name:'工程院'},
        	                {value:134, name:'石科院'},
        	                {value:134, name:'抚研院'},
        	                {value:134, name:'北化院'},
        	                {value:134, name:'上海院'},
        	                {value:134, name:'安工院'}
						];
						loadPie_tt('main8','科研经费支出按研究院占比分析',legend_names_8,series_values_8,monthstr); 
						
						
						var legends7=['人均成本','人均专利','人均项目'];
						var xAxisData7=['石勘院','物探院','工程院','石科院','抚研院','北化院','上海院','安工院'];
						var seriesData7= [
		        	        {
		        	            name:'人均成本',
		        	            type:'line',
		        	            stack: '总量',
		        	            data:[120, 132, 101, 134, 90, 230, 210, 210]
		        	        },
		        	        {
		        	            name:'人均专利',
		        	            type:'line',
		        	            stack: '总量',
		        	            data:[220, 182, 191, 234, 290, 330, 310, 210]
		        	        },
		        	        {
		        	            name:'人均项目',
		        	            type:'line',
		        	            stack: '总量',
		        	            data:[150, 232, 201, 154, 190, 330, 410, 210]
		        	        }
		        	    ];
						var yAxis7= {
					        type: 'value'
					    };
						load_mony_line_tt('main7','科研经费人均支出按研究院分布情况分析',legends7,xAxisData7,yAxis7,seriesData7,monthstr);
						
						
						
}     


init();
function search_Event()
{
	init();
}      
        
            
           
    </script>
</body>
</html>
