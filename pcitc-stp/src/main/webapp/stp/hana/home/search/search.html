<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/common.css">
    <script src="/layuiadmin/layui/layui.js"></script>
    <style>
        iframe{width: 100%;height: 100%;border: none;}
    </style>
</head>
<body>

<div class="layui-tab layui-tab-brief" lay-filter="component-tabs-hash">

    <input type="text" name="keyword"  value="${keyword}"  id="keyword">
    <!--按钮组-->
    <div class="btnGroup">
        <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg"  onclick="search()">查询</button>
    </div>


    <ul class="layui-tab-title">
        <li class="layui-this" lay-id="11">科研<span id="keyan"></span></li>
        <li lay-id="22">成果<span id="achivement"></span></li>
    </ul>
    <div class="layui-tab-content">
        <div class="layui-tab-item layui-tab-i layui-show">
            <iframe id="ifrOne" src="" name="iframename"></iframe>
        </div>

        <div class="layui-tab-item layui-tab-i">
            <iframe id="ifrTwo" src=""></iframe>
        </div>
    </div>
</div>

<!--选择器-->


</body>
</html>
<!--表格数据操作js-->
<script src="/common/js/jquery-1.11.3.min.js"></script>
<script>
    var table,selectRowData;
    var xmmc=$('#xmmc').val();

    layui.config({
        base: '/layuiadmin/lib/extend/'
    }).use(['jquery','form', 'laydate','table','laypage','element'], function(){
        $ = layui.jquery
            ,table = layui.table
            ,form = layui.form
            ,laydate = layui.laydate,
            form.render(null, 'component-form-group');
        // laydate.render({
        //     elem: '#nd'
        //     ,type: 'year'
        // });
        //加载表格
        // renderTable();
        //移除表头的复选框,去掉全选
        $(".layui-table-header table thead th input").remove();

        // 触发不同的按钮事件
        var $ = layui.$, active = {
        };
        //监听排序
        table.on('sort(model-table)', function(obj){
            console.log(this, obj.field, obj.type)
            //return;
            //服务端排序
            table.reload('model-table', {
                initSort: obj,
                page: {curr: 1}, //重新从第一页开始
                where: { //重新请求服务端
                    key: obj.field, //排序字段
                    order: obj.type //排序方式
                }
            });
        });
        //区别按钮属性
        $('.layui-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });

        if($(".specialty ul li").length>=25){
            $(".specialty .selector-right").css({"height":"80px","overflow-y":"scroll"})
        }

        /*选择器*/
        /*循环生成*/
        //费用类别
        /* $(".cost ul").append("<li><a href='javascript:;'>"+"资本性"+"</a> </li>");
        //研究院
        $(".institute ul").append("<li><a href='javascript:;'>"+"资本性"+"</a> </li>");
        //其他系统标识
        $(".system ul").append("<li><a href='javascript:;'>"+"资本性"+"</a> </li>");
        //专业类别
        $(".specialty ul").append("<li><a href='javascript:;'>"+"资本性"+"</a> </li>"); */
        $(".selector>div ul li a").click(function () {
            if($(this).parents("li").hasClass("layui-this")){
                $(this).parents("li").removeClass("layui-this");
                var htmlThis=$(this).html();
                $(".conditionNew ul li a").each(function () {
                    if(htmlThis.indexOf($(this).html())!= -1 ){
                        $(this).parents("li").remove();
                        return false;
                    }
                });
            }else {
                $(this).parents("li").addClass("layui-this");
                var htmlName=$(this).parents(".selector-right").prev().html();
                var htmlThis=$(this).html();
                $(".conditionNew").removeClass("layui-hide");
                $(".conditionNew ul").append("<li>"+htmlName+"<a href='javascript:;'>"+htmlThis+"</a></li>");
                $(".conditionNew ul li a").click(function () {
                    $(this).parents("li").remove();
                });
                $(".conditionNew ul li a").click(function () {
                    var htmlThis=$(this).html();
                    $(".selector-right ul li a").each(function () {
                        if(htmlThis.indexOf($(this).html())!= -1 ){
                            $(this).parents("li").removeClass("layui-this");
                            return false;
                        }
                    });
                });
                $(".conditionNew .dele").click(function () {
                    $(".conditionNew ul li").remove();
                    $(".selector-right ul li").removeClass("layui-this");
                    $(".conditionNew").addClass("layui-hide");
                });
            }
        });
        /* iframe赋值*/
        search();
    });

    function search() {
        var keyword=$("#keyword").val();
        $("#ifrOne").attr("src","/fullSearch/query_scientific?keyword="+keyword);
        $("#ifrTwo").attr("src","/fullSearch/query_achievement?keyword="+keyword);

    }
</script>

</body>
</html>
