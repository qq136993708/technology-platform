<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/layuiadmin/style/common.css">
    <link rel="stylesheet" href="/common/css/echart-common.css">
</head>
<style>
    td{padding:3px}
</style>
<body>  
<div class="searchBox">
    <!--查询条件-->
        <label class="dateInput">
            <span>月份</span>
            <input type="text" name="month" placeholder="请选择月份" title="月份"  value="${month}" autocomplete="off" class="form-control" id="month">
        </label>
       <div class="layui-input-inline">
         <select name="companyCode" id="companyCode" >
              <#list companyCodeList as vo>
              	 <#if vo.g0GSJC == '全部'>
              	 	<option value="${vo.g0GSDM}"  selected="selected">${vo.g0GSJC}</option>
              	 </#if>
                 <#if vo.g0GSJC != '全部'>
              	 	<option value="${vo.g0GSDM}">${vo.g0GSJC}</option>
              	 </#if>
               </#list>
            </select>
       </div>
       <form class="layui-form layui-form1">
            <div class="layui-input-inline">
                <#list projectCodeList as vo>
                   <input type="checkbox" name="like[write]" lay-skin="primary" title="${vo.g0XMGLLX}" checked="">
                </#list>
            </div>
        </form>

    <!--按钮组-->
    <div class="btnGroup">
        <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" onclick="search_Event()" data-type="searchEvent">查询</button>
    </div>
    <span class="unitBox">单位：万元</span>
</div>


<!--echarts-->
<div class="content-body container">
       <!--图表二比一布局-->
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main1" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main2" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
        
     <!--图表二比一布局-->
        <div class="layui-row two-one-box">
            <div class="layui-col-xs8 layui-col-sm8 layui-col-md8 twoBox echarts">
                <div id="main3" style="width: 100%;height: 400px;"></div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4 oneBox echarts">
                <div id="main4" style="width: 100%;height: 400px;"></div>
            </div>
        </div>
     
      <div class="one-chart-box" style="margin-top:1px">
         <div class="layui-row echarts" style="height: 600px;">
             <div id="main6" class="layui-col-xs8" style="height: 600px;"></div>
             <div id="main7" class="layui-col-xs4 layui-col-sm4" style="height: 600px;;border:0px #ccc solid" >
               <table class="layui-table" style="margin-top:60px">
					     <tr>
					      <td align="left" style="font-weight:bold;padding-right:6px;">项目编码：</td><td >P1</td>
					     </tr>
					     <tr>
					      <td align="left" style="font-weight:bold;padding-right:6px;">项目描述：</td><td >P1 XXXXX	</td>
					     </tr>
					     <tr>
					      <td align="left" style="font-weight:bold;padding-right:6px;">鉴定结论：	</td><td >国际先进	</td>
					     </tr>
					     <tr>
					      <td align="left" style="font-weight:bold;padding-right:6px;">专利申请数量：</td><td >3</td>
					     </tr>
					     <tr>
					      <td align="left" style="font-weight:bold;padding-right:6px;">项目组平均年龄：</td><td >化工业</td>
					     </tr>
				  </table>
				  <div style="margin-top:10px;">项目组人员详细信息：</div>
				  <table class="layui-table">
				   <thead>
					     <tr>
					      <td align="center" style="font-weight:bold;padding:6px;">姓名</td>
					      <td align="center" style="font-weight:bold;padding:6px;">年龄</td>
					      <td align="center" style="font-weight:bold;padding:6px;">技术职称</td>
					      <td align="center" style="font-weight:bold;padding:6px;">文化程度</td>
					      <td align="center" style="font-weight:bold;padding:6px;">工作单位</td>
					     </tr>
					      </thead>
					     <tr>
					      <td >张三</td>
					      <td >58</td>
					      <td >正高</td>
					      <td >博士</td>
					      <td >石科院</td>
					     </tr>
					    <tr>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					     </tr>
					      <tr>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					     </tr>
				  </table>
				  <div style="margin-top:20px;">专利详细信息：</div>
				  
              <table class="layui-table">
                   <thead>
					     <tr>
					      <td align="center" style="font-weight:bold;padding:6px;">专利名称</td>
					      <td align="center" style="font-weight:bold;padding:6px;">专利申请人</td>
					      <td align="center" style="font-weight:bold;padding:6px;">专利申请号</td>
					      <td align="center" style="font-weight:bold;padding:6px;">国别地区</td>
					      <td align="center" style="font-weight:bold;padding:6px;">授权号</td>
					      <td align="center" style="font-weight:bold;padding:6px;">授权日期</td>
					     </tr>
			    </thead>
					    <tr>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					     </tr>
					      <tr>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					      <td >xxx</td>
					     </tr>
				  </table>
             </div>
             
         </div>
     </div>
     
     

</div>
<!--echarts end-->

<!--表格数据操作js-->
<script src="/common/js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
<script type="text/javascript" src="/plugins/echarts/echarts.min.js"></script>
<script type="text/javascript" src="/plugins/echarts/walden.js"></script>	
<script type="text/javascript" src="/stp/hana/common/stp_common_line.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_bar.js"></script>
<script type="text/javascript" src="/stp/hana/common/stp_common_pie.js"></script>

<script type="text/javascript">
var layer;
layui.config({
    base: '/layuiadmin/module/modules/' 
}).use(['jquery','form', 'laydate','table','layer'], function(){
	  $ = layui.jquery
      ,table = layui.table
      ,form = layui.form
      ,layer = layui.layer
      ,laydate = layui.laydate
	  form.render(null, 'component-form-group');
            laydate.render({
               elem: '#month'
               ,format: 'yyyyMM'
            });
});


function init()
{
		var allCode="${allCode?default('')}";
		var allCode_text="全部院所";
		var v_date=(new Date()).getTime();
		var month=$('#month').val();
		var companyCode=$('#companyCode').val();
		var monthstr=getNowFormatDate($('#month').val());
		var checkText=$("#companyCode").find("option:selected").text();
		if(checkText=='全部')
		{
			checkText="全部院所";
		}
		

		
		
		var seriesData_1=[
		        {
  		            name:'2014',
  		            type:'bar',
  		            color: ['#37A2DA'],
  		            data:[272, 24]
  		        },
  		        {
  		            name:'2015',
  		            type:'bar',
  		            color: ['#67E0E3'],
  		             data:[232, 414]
  		        },
  		        {
  		            name:'2016',
  		            type:'bar',
  		          data:[202, 464]
  		        },
  		        {
  		            name:'2017',
  		            type:'bar',
  		            data:[632, 424]
  		        },
  		        {
  		            name:'2018',
  		            type:'bar',
  		            data:[152, 424]
  		        }
  		        
  		    ];
  
		  var yAxis=[
		        {
		            type: 'value',
		            name: '金额（万元）',
		            min: 0,
		            max: 850,
		            interval: 200,
		            axisLabel: {
		                formatter: '{value}'
		            }
		        }
		    ];
		var legends_1=['2014','2015','2016','2017','2018'];
		var xAxisData_1= ["国内专利","国外专利"];
		load_mutl_bar_tt("main1","科技奖励项目涉及专利授权数量年趋势分析",legends_1,xAxisData_1,yAxis,seriesData_1,monthstr);
		
		var legend_names_2=['国内专利','国外专利'];
		var series_values_2=[
			 {value:210, name:'国内专利'},
             {value:210, name:'国外专利'}
		];
		loadPie_tt('main2','科技奖励项目涉及专利授权数量按国别占比分析',legend_names_2,series_values_2,monthstr);
		
		
		
		var seriesData_2=[
		        {
  		            name:'2014',
  		            type:'bar',
  		            color: ['#37A2DA'],
  		            data:[222, 44, 734, 44, 734]
  		        },
  		        {
  		            name:'2015',
  		            type:'bar',
  		            color: ['#67E0E3'],
  		             data:[232, 454, 74, 44, 734]
  		        },
  		        {
  		            name:'2016',
  		            type:'bar',
  		          data:[32, 444, 74, 44, 134]
  		        },
  		        {
  		            name:'2017',
  		            type:'bar',
  		            data:[232, 424, 74, 42, 734]
  		        },
  		        {
  		            name:'2018',
  		            type:'bar',
  		            data:[252, 424, 514, 24, 734]
  		        }
  		        
  		    ];

	  var yAxis2=[
	        {
	            type: 'value',
	            name: '金额（万元）',
	            min: 0,
	            max: 850,
	            interval: 200,
	            axisLabel: {
	                formatter: '{value}'
	            }
	        }
	    ];
	var legends_2=['2014','2015','2016','2017','2018'];
	var xAxisData_2= ["正高","副高","中级","初级","技术员"];
	load_mutl_bar_tt("main3","科技奖励项目涉及研发人员数量年趋势分析",legends_2,xAxisData_2,yAxis2,seriesData_2,monthstr);
	
	
	
	
	
	
	var legend_names_4=["正高","副高","中级","初级","技术员"];
	var series_values_4=[
		{value:135, name:'正高'},
        {value:810, name:'副高'},
        {value:210, name:'中级'},
        {value:910, name:'初级'},
        {value:410, name:'技术员'}
	];
	loadPie_tt('main4','科技奖励项目涉及研发人员数量按职称占比分析',legend_names_4,series_values_4,monthstr);
	
	load_dot(monthstr) ;
}		
		
init();	
		
		
        
        
        
        
        
        

function load_dot(subtext) 
{
     
        
        var myChart6 = echarts.init(document.getElementById('main6'));
        var data = [
            [[28604,77,17096869,'P1','科技发明奖'],[31163,77.4,27662440,'P15','科技发明奖'],[1516,68,1154605773,'P30','科技发明奖'],[13670,74.7,10582082,'P45','科技发明奖'],[28599,75,4986705,'P25','科技发明奖'],[29476,77.1,56943299,'P75','科技发明奖'],[31476,75.4,78958237,'P48','科技发明奖'],[28666,78.1,254830,'P28','科技发明奖'],[1777,57.7,870601776,'P38','科技发明奖'],[29550,79.1,122249285,'P65','科技发明奖'],[2076,67.9,20194354,'P7','科技发明奖'],[12087,72,42972254,'P50','科技发明奖'],[24021,75.4,3397534,'P51','科技发明奖'],[43296,76.8,4240375,'P52','科技发明奖'],[10088,70.8,38195258,'P53','科技发明奖'],[19349,69.6,147568552,'P54','科技发明奖'],[10670,67.3,53994605,'P55','科技发明奖'],[26424,75.7,57110117,'P56','科技发明奖'],[37062,75.4,252847810,'P57','科技发明奖']],
            [[44056,11.8,23968973,'P1','科技进步奖'],[43294,21.7,35939927,'P15','科技进步奖'],[93334,76.9,1376048943,'P30','科技进步奖'],[21291,28.5,11389562,'P45','科技进步奖'],[98923,80.8,5503457,'P25','科技进步奖'],[37599,81.9,64395345,'P75','科技进步奖'],[84053,11.1,80688545,'P48','科技进步奖'],[12182,82.8,329425,'P28','科技进步奖'],[5903,33.8,1310050527,'P38','科技进步奖'],[36162,83.5,126573481,'P65','科技进步奖'],[1390,71.4,25155317,'P7','科技进步奖'],[34644,80.7,50293439,'P50','科技进步奖'],[34186,80.6,4528526,'P51','科技进步奖'],[64304,81.6,5210967,'P52','科技进步奖'],[24787,77.3,38611794,'P53','科技进步奖'],[23038,73.13,143456918,'P54','科技进步奖'],[19360,76.5,78665830,'P55','科技进步奖'],[38225,81.4,64715810,'P56','科技进步奖'],[53354,79.1,321773631,'P57','科技进步奖']],
            [[41056,11.8,23961973,'P1','前瞻研究奖'],[42294,41.7,35039927,'P15','前瞻研究奖'],[23034,71.9,1376048943,'P30','前瞻研究奖'],[21091,72.5,11389562,'P45','前瞻研究奖'],[32923,20.8,5203457,'P25','前瞻研究奖'],[32599,41.9,64365345,'P75','前瞻研究奖'],[40053,41.1,80088545,'P48','前瞻研究奖'],[42112,58.8,329125,'P28','前瞻研究奖'],[5913,68.8,1311055527,'P38','前瞻研究奖'],[36062,80.5,126503481,'P65','前瞻研究奖'],[1300,51.4,25150317,'P7','前瞻研究奖'],[34044,50.7,50203439,'P50','前瞻研究奖'],[34106,80.6,4520526,'P51','前瞻研究奖'],[60304,41.6,5210067,'P52','前瞻研究奖'],[27787,74.3,38611694,'P53','前瞻研究奖'],[27038,93.13,143236918,'P54','前瞻研究奖'],[19560,66.5,78660830,'P55','前瞻研究奖'],[31225,41.4,64715810,'P56','前瞻研究奖'],[50354,70.1,320773631,'P57','前瞻研究奖']]
            ];

      var  option6 = {
            title: {
                text: '科技奖励、项目组平均年龄与专利数量热点分布图',
                x:'center',
                y: '10px',
    	        textStyle: {
    	            fontSize: 15,
    	            fontWeight: 'normal',
    	            color: '#000000'       
    	        },
    	        subtextStyle: {
    	            color: '#7B7B7B'        
    	        },
    	        subtext:''
            },
            legend: {
            	 bottom: 10,
                data: ['科技发明奖', '科技进步奖', '前瞻研究奖']
            },
            xAxis: {
                splitLine: {
                    lineStyle: {
                        type: 'dashed'
                    }
                },
                type : 'value',
                name: '资金投入'
            },
            yAxis: {
                splitLine: {
                    lineStyle: {
                        type: 'dashed'
                    }
                },
                scale: true,
                type : 'value',
                name: '项目周期'
               
            },
            series: [{
                name: '科技发明奖',
                data: data[0],
                type: 'scatter',
                 symbolSize: function (data) {
                    return Math.sqrt(data[2]) / 5e2;
                }, 
              /*   symbolSize: 20, */
                label: {
                    emphasis: {
                        show: true,
                        formatter: function (param) {
                            return param.data[3];
                        },
                        position: 'top'
                    }
                },
                itemStyle: {
                    normal: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(120, 36, 50, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(251, 108, 123)'
                        }, {
                            offset: 1,
                            color: 'rgb(104, 46, 72)'
                        }])
                    }
                }
            }, {
                name: '科技进步奖',
                data: data[1],
                type: 'scatter',
               /*  symbolSize: function (data) {
                    return Math.sqrt(data[2]) / 5e2;
                }, */
                symbolSize: 20,
                label: {
                    emphasis: {
                        show: true,
                        formatter: function (param) {
                            return param.data[3];
                        },
                        position: 'top'
                    }
                },
                itemStyle: {
                    normal: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(25, 100, 150, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(129, 267, 238)'
                        }, {
                            offset: 1,
                            color: 'rgb(25, 133, 207)'
                        }])
                    }
                }
                
            },
            {
                name: '前瞻研究奖',
                data: data[2],
                type: 'scatter',
                /* symbolSize: function (data) {
                    return Math.sqrt(data[2]) / 5e2;
                }, */
                symbolSize: 20,
                label: {
                    emphasis: {
                        show: true,
                        formatter: function (param) {
                            return param.data[3];
                        },
                        position: 'top'
                    }
                },
                itemStyle: {
                    normal: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(120, 36, 50, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(251, 218, 223)'
                        }, {
                            offset: 1,
                            color: 'rgb(204, 56, 72)'
                        }])
                    }
                }
            }
            
            ]
        };
      option6.title.subtext=subtext;
      myChart6.setOption(option6);
      myChart6.on('click', function (params) {

    	  console.log(params);
    	  alert(params.value);
            
     });  
        
}      
      function search_Event()
      {
    	 init();
      } 
    </script>
</body>
</html>
