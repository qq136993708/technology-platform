<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户配置</title>
    <link rel="stylesheet" type="text/css" href="/layuiadmin/ztree/css/metroStyle/metroStyle.css">
	
    <link rel="stylesheet" type="text/css" href="/layuiadmin/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/ztree/css/metroStyle/metroStyle.css">
    <link rel="stylesheet" type="text/css" href="/layuiadmin/style/common.css">
    <script type="text/javascript" src="/plugins/jQuery/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="/layuiadmin/ztree/js/jquery.ztree.core.js"></script>
    <script type="text/javascript" src="/layuiadmin/ztree/js/jquery.ztree.excheck.min.js"></script>
    <script type="text/javascript" src="/layuiadmin/ztree/js/jquery.ztree.exhide.min.js"></script>
    <script type="text/javascript" src="/layuiadmin/layui/layui.js"></script>
    <style>
        .treeTableBox .layui-tab-title li{border:none;}
        .treeTableBox .layui-tab-title li:last-child{border:none;}
        .treeTableBox .layui-tab-brief>.layui-tab-title .layui-this{color: #000;border-bottom: 2px solid #0f9ee0;}
        .layui-tab-brief>.layui-tab-more li.layui-this:after, .layui-tab-brief>.layui-tab-title .layui-this:after{
            border: none;}
        .treeTableBox .layui-tab-title{margin-left: 5px;}
        .layui-tab-item{border-top:1px solid #e6e6e6;border-bottom:1px solid #e6e6e6;}
        .tableTitle{margin-top:3px;font-size:12px;}
        .layui-form{ border-bottom:1px solid #e6e6e6;}
        .orgTree,.layui-border-box {border-bottom:0;}
    </style>
</head>
<body>
<div class="treeTableContainer">
<div class="treeBox">
<div class="title-box">
                <span>机构人员</span>
            </div>
        <div class="layui-side-scroll">
            <!-- 左侧子菜单 -->
            <ul id="userTree" class="ztree"></ul>
        </div>
</div>

<div class="treeTableBox">
    <div class="layui-tab layui-tab-brief" lay-filter="component-tabs-brief">
        <ul class="layui-tab-title">
            <li class="layui-this">配置项目</li>
            <li>配置部门</li>
            <li>配置部门(树形)</li>
            <li>直属研究院</li>
        </ul>
        <div class="layui-tab-content" style="background: #fff;padding: 5px 5px 0px;box-sizing: border-box;">
            <div class="layui-tab-item layui-show" >
                <div class="tableToolBox">
                    <div class="tableTitle">
	              		<label class="dateInput">
			            <span>项目名称</span>
			            <input type="text" name="projectName" placeholder="请输入项目名称"
			                   title="项目名称" autocomplete="off"
			                   class="form-control" id="projectName">
	        			</label>
	       				 <!--按钮组-->
				        <div class="btnGroup">
				            <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" data-type="searchEvent">查询
				            </button>
				            <button class="layui-btn layui-btn-sm fontColor-default border-default btn_reset btnMyBgImg"
				                    data-type="resetEvent">重置
				            </button>
				        </div>
            		</div>
                    <div  class="tableBtns">
                        <button class="layui-btn layui-btn-sm fontColor-blue borderColor-blue btn_add btnMyBgImg " data-type="addEvent">保存</button>
                    </div>
                </div>
                <form id="tableForm" class="layui-form" action="" lay-filter="component-form-group layui-container">
                <table id="funTable" class="layui-hide" lay-filter="funTable"></table>
                </form>
            </div>
            <div class="layui-tab-item">
                <div class="tableToolBox">
                    <div class="tableTitle">
	              		<label class="dateInput">
			            <span>部门名称</span>
			            <input type="text" name="unitName" placeholder="请输入部门名称"
			                   title="部门名称" autocomplete="off"
			                   class="form-control" id="unitName">
	        			</label>
	       				 <!--按钮组-->
				        <div class="btnGroup">
				            <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" data-type="searchEvent1">查询
				            </button>
				            <button class="layui-btn layui-btn-sm fontColor-default border-default btn_reset btnMyBgImg"
				                    data-type="resetEvent1">重置
				            </button>
				        </div>
            		</div>
                    <div  class="tableBtns">
                        <button class="layui-btn layui-btn-sm fontColor-blue borderColor-blue btn_add btnMyBgImg " data-type="addEvent1">保存</button>
                    </div>
                </div>
                  <form id="tableForm1" class="layui-form" action="" lay-filter="component-form-group layui-container">
                <table id="funTable1" class="layui-hide" lay-filter="tableEvent"></table>
                </form>
            </div>
            
            <!-- 拓展(树) -->
            <div class="layui-tab-item orgTree" style="padding-bottom: 26px;">
                <div class="tableToolBox">
                    <div class="tableTitle">
	              		<label class="dateInput">
			            <span>部门名称</span>
			            <input type="text" name="unitName1" placeholder="请输入部门名称"
			                   title="部门名称" autocomplete="off"
			                   class="form-control" id="keyword" onkeyup="filterSearch(this.value);">
	        			</label>
	       				 <!--按钮组-->
				        <div class="btnGroup">
				            <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" data-type="searchEvent2"  onclick="filterSearch(document.getElementById('keyword').value);">查询
				            </button>
				            <button class="layui-btn layui-btn-sm fontColor-default border-default btn_reset btnMyBgImg"
				                    onclick="reset()">重置
				            </button>
				        </div>
            		</div>
                    <div  class="tableBtns">
                        <button class="layui-btn layui-btn-sm fontColor-blue borderColor-blue btn_add btnMyBgImg " data-type="addEvent2">保存</button>
                    </div>
                </div>
                  <div class="layui-side-scroll" style="height:98%;border:1px solid #e6e6e6;border-top:0;">
					            <ul id="orgTree" class="ztree"></ul>
					       </div>
            </div>
            <!-- 直属研究院配置 -->
            <div class="layui-tab-item">
                <div class="tableToolBox">
                    <div class="tableTitle">
	              		<label class="dateInput">
			            <span>研究院名称</span>
			            <input type="text" name="dicName" placeholder="请输入研究院名称"
			                   title="研究院名称" autocomplete="off"
			                   class="form-control" id="dicName">
	        			</label>
	       				 <!--按钮组-->
				        <div class="btnGroup">
				            <button class="layui-btn layui-btn-sm fontColor-white btn_search btnMyBgImg" data-type="searchEvent3">查询
				            </button>
				            <button class="layui-btn layui-btn-sm fontColor-default border-default btn_reset btnMyBgImg"
				                    data-type="resetEvent3">重置
				            </button>
				        </div>
            		</div>
                    <div  class="tableBtns">
                        <button class="layui-btn layui-btn-sm fontColor-blue borderColor-blue btn_add btnMyBgImg " data-type="addEvent3">保存</button>
                    </div>
                </div>
                  <form id="tableForm2" class="layui-form" action="" lay-filter="component-form-group layui-container">
                <table id="funTable2" class="layui-hide" lay-filter="tableEvent"></table>
                </form>
            </div>

        </div>
    </div>

</div>
</div>
<script type="text/javascript">
$(function(){
	initUserTree();
	proTable();
});
     
	 var userTree,userTreeId;
	 function initUserTree(){
        var userTreeSetting = {
        		check: {
    				enable: true,//节点上是否显示 checkbox / radio
    				chkStyle: "checkbox",//勾选框类型(checkbox 或 radio）
    				chkboxType: { "Y": "s", "N": "s" },
    				autoCheckTrigger: true,//设置自动关联勾选时是否触发 beforeCheck / onCheck 事件回调函数
    				chkDisabledInherit: true
    			},
    			//异步加载信息
    			async: {
    				enable: true,
    				url :  '/userProperty/selectUserUnderOfUnitTree?curSec='+Math.random(),
    				dataType : 'json',
    				autoParam:["id=parentId"],//这里只设置属性名，不设置值，id=orgId意思是，将id属性名替换为parentId提交给后台
    				//otherParam: { "inventoryId": inventoryId},//自定义提交参数
    				dataFilter: userTreeAjaxDataFilter,//对 Ajax 返回数据进行预处理的函数
    				
    			}, 
    			view: {
    				selectedMulti: true,//是否允许同时选中多个节点
    				//fontCss: setHighlight
    			},
    			callback: {
    				beforeClick: userTreeBeforeClick,//不勾选父节点
    			    beforeAsync: userTreeBeforeAsync,//只有组需要异步加载 
    				onClick: function (e, treeId, treeNode, clickFlag) {
    					userTreeId = treeNode.id;
    					//点击勾选checkbox，同时取消勾选其他
    					userTree.checkAllNodes(false);
    					userIds.splice(0,userIds.length);
    					userTree.checkNode(treeNode, !treeNode.checked, true,true); 
    					switch (tabIndex) {
						case 0:
							layui.table.reload('property', {where:{param:{userId:treeNode.id,dataType:"project_id"}}});
							break;
						case 1:
							layui.table.reload('property1', {where:{param:{userId:treeNode.id,dataType:"UNITCODE"}}});
							break;
						case 2:
							initOrgTree(treeNode.id);
							break;
						case 3:
							layui.table.reload('property2', {where:{param:{userId:treeNode.id,dataType:"G0DSM"}}});
							break;
						}
    					
    	            },
    	            onCheck : userTreeOnCheck,//勾选节点
    	            onAsyncSuccess: userTreeOnAsyncSuccess, //异步加载成功后调用
    	            beforeCheck: userTreeBeforeCheck
    			}
    		}

        //用户配置树节点
        var userTreeSettingNodes ;
        
        $.ajax({
            type : 'post',
            dataType : 'json',
            async: false,
            url : '/userProperty/getOrgTree?i='+Math.random(),
            success : function(data) {
            	//userTreeSettingNodes = $.parseJSON(data);
            	userTreeSettingNodes = data;
            },
            error : function(e) {
            	  layer.msg("出错了");
            }
        });
        // zTree 的数据属性，读取全部数据
        userTree = $.fn.zTree.init($("#userTree"), userTreeSetting, userTreeSettingNodes);
      	//展开根节点
        var nodes = userTree.getNodes();
        if (nodes.length > 0) {
        	userTree.expandNode(nodes[0], true, false, true);
        }
        
	 }
	 
	 
	 
	//点击节点时，如果是父节点则不勾选
     function userTreeBeforeClick(treeId, treeNode) {
     	return true;
     	
     }

     //异步加载前
     function userTreeBeforeAsync(treeId, treeNode) {
     	//只有属性为叶节点才进行异步加载，即只有组才加载农户
     	return true;
     	
     };
     var userIds = new Array();
     //勾选节点,如果是未展开的父节点则展开子节点
     function userTreeOnCheck(event, treeId, treeNode) {
      
 	   // userIds.splice(0,deleteUserIds.length);
    	 console.log("deleteUserIds :"+deleteUserIds);
    	 console.log("userIds :"+userIds);
     	//展开节点
     	/* if (treeNode.isParent && treeNode.open == false) {
     		userTree.expandNode(treeNode);
     	} */
     	/* if(treeNode.checked){
     		userTree.selectNode(treeNode,true,false);
        }else{
        	userTree.cancelSelectedNode(treeNode);
        } */
     };
     
     function userTreeAjaxDataFilter(treeId, parentNode, childNodes){
     	if(!childNodes) return null;
     	//console.log(childNodes);
     	return childNodes;
     }
     
     function userTreeOnAsyncSuccess(event, treeId, treeNode, msg){
     	//initCheck($("input[name=roleId]").val());
     }
     
     function userTreeBeforeExpand(treeId, treeNode){
    	 return true;
     }
     //check之前回调
	function userTreeBeforeCheck(treeId, treeNode){
		//取消选中
		if(treeNode.checked ){
			var index = $.inArray(treeNode.id, userIds); 
			if(index >= 0){
				userIds.splice($.inArray(treeNode.id,userIds),1); 
			}
			//如果如果选中部门的话，找出旗下所有人员，所有部门下人员 push到另一个要删除的数组deleteUserIds ,最终用userIds - deleteUserIds = userIds
			if(treeNode.nodeType == 'unit'){
				findChildByChildDelete(treeNode.code);
				$.each(deleteUserIds,function(index,userId){
			 		var index = $.inArray(userId, userIds);
			 		console.log("index:"+index);
			 		if(index >= 0){
			 			userIds.splice($.inArray(userId,userIds),1); 
			 		}
			 	}); 
			}
		//选中
		}else{
			if(treeNode.nodeType != 'unit'){
				userIds.push(treeNode.id );
			}else{
				//如果选中部门的话，找出旗下所有人员，所有部门下人员 push到userIds
				//所有部门下人员 push到userIds ,最终用 deleteUserIds - userIds =deleteUserIds
				findChildByChild(treeNode.code);
				$.each(userIds,function(index,userId){
			 		var index = $.inArray(userId, deleteUserIds);
			 		if(index >= 0){
			 			deleteUserIds.splice($.inArray(userId,deleteUserIds),1); 
			 		}
			 	}); 
			}
		}
		
		
	}
	 
     
     
     function findChildByChild(parentId){
    	 $.ajax({
	            type : 'post',
	            dataType : 'json',
	            data : {"parentId":parentId},
	            async: false,
	            url :  '/userProperty/child-by-child?curSec='+Math.random(),
	            success : function(data) {
	            	$.each(data,function(index,node){
	      				   userIds.push(node.id);
	      		    }); 
         	
	            },
	            error : function(e) {
	                layer.msg("出错了");
	            }
	        });
     }
     
     var deleteUserIds = new Array();
     function findChildByChildDelete(parentId){
    	 $.ajax({
	            type : 'post',
	            dataType : 'json',
	            data : {"parentId":parentId},
	            async: false,
	            url :  '/userProperty/child-by-child?curSec='+Math.random(),
	            success : function(data) {
	            	$.each(data,function(index,node){
	            		deleteUserIds.push(node.id);
	      		    });
         	
	            },
	            error : function(e) {
	                layer.msg("出错了");
	            }
	        });
     }
     
     
     function isBlank(str) {
   	    if (str == null || typeof str == "undefined" || str == "" || trim(str) == "") {
   	        return true;
   	    }
   	    return false;
   	}

   	function trim(str) {
   	    if (str == null || typeof str == "undefined") {
   	        return "";
   	    }
   	    return str.toString().replace(/(^\s+)|(\s+$)/g, "");
   	}
    </script>
    



<script type="text/javascript">
    //注意：选项卡 依赖 element 模块，否则无法进行功能性操作
    var tabIndex =0;
    var table;
    function proTable(userId){
    	if(!userId){
    		userId = '10001'
    	}
    	layui.use(['table','element','laytpl','jquery'], function () {
	    	table = layui.table;

	    	var element=layui.element;
	    	var $=layui.jquery;
	    	var laytpl=layui.laytpl;

            //切换Tab事件
	        element.on('tab(component-tabs-brief)', function(obj){  
	     			//layer.msg(obj.index + '：' + this.innerHTML);  
	     			switch (obj.index) {
	    			case 0:
	    				//layer.msg("切换tab")
	    				proTable(userTreeId);
	    				//table.reload('property', { where: {param: {"userId" :userTreeId,dataType : 'project_id'}}});
	    				tabIndex = 0;
	    				break;
	    			case 1:
	    				unitTable(userTreeId);
	    				//layui.table.reload('property1', { where: {param: {"userId" :userTreeId,dataType : 'UNITCODE'}}});
	    				tabIndex = 1;
	    				break;
	    			case 2:
	    				initOrgTree(userTreeId);
	    				tabIndex = 2;
	    				break;
	    			case 3:
	    				dicTable(userTreeId);
	    				tabIndex = 3;
	    				break;
	    			}
	        });  
	        //渲染
	        table.render({
	            elem: '#funTable',
	            url: '/userProperty/getTableData',
	            method:"POST",
	            where: {param: {userId : userId,dataType : 'project_id'}},
	            limit: 15,
	            id: 'property',
				height: commonDislodgeTable(),
	            page: {
	                count: 500, //数据总数，从服务端得到
	                groups: 5,
	                limits: [15,30,45,60],
	                layout: ['count', 'limit', 'prev', 'page', 'next', 'skip'], //自定义分页布局
	                first: '首页', //不显示首页
	                last: '尾页', //不显示尾页
	                theme: '#0F9EE0'
	            },
	            cols: [[
					{width: 45,"title":'<input id="checkAll" type="checkbox" lay-skin="primary" >',
						templet: function(d){
							var btn;
							if(d.permission == 1){
								console.log(d.permission);
								btn =" <input checked=\"checked\" type=\"checkbox\" name=\"permission\"  lay-skin=\"primary\" data-on-permission-id=\""+ d.projectId +"\"  >";
							}else{
								btn =" <input type=\"checkbox\" name=\"permission\"  lay-skin=\"primary\" data-on-permission-id=\""+ d.projectId +"\"  >" ;	
							}
				        	return btn;
				      } },
	                {title:'序号', type:'numbers'},
	                {field:'projectName',   title:'项目名称',  style:'cursor: pointer;',align:'center'},
	                {field:'projectCode',      title:'项目编码', style:'cursor: pointer;',align:'center'},
	            ]],
	            done:function(res, curr, count){
	            	$("#checkAll").next().on("click",function () {
	            		//console.log($(this).prev().prop("checked"))
	                    if ($(this).prev().prop("checked")) {
	                    	//真实框
	                        $("input[name='permission']").prop("checked", true);
	                    	//表面框
	                        $("input[name='permission']").next().addClass('layui-form-checked');
	                        
	                    } else {
	                        $("input[name='permission']").prop("checked", false);
	                        $("input[name='permission']").next().removeClass('layui-form-checked');
	                    }
	                });
	            }
	        });


	    	console.log($("#checkAll"))
	     	// 触发不同的按钮事件
	        var $ = layui.$, active = {
	            
	            addEvent: function(){ //点击保存按钮
	            	saveUserProperty();
	            },
	            searchEvent:function(){
	            	table.reload('property', {
		                where: { //重新请求服务端
		                    param :{projectName : $("#projectName").val()}
		                }
		            });
	            },
	            resetEvent:function(){
	            	$("input[name=projectName]").val(''); 
	            	proTable();
	            },
	            addEvent2:function(){
	            	saveUserPropertyUnitTree();
	            }
	            
	        };
			$(".orgTree").height((parent.$(".layui-body .layui-show .layadmin-iframe").height()-90))
			console.log(parent.$(".layui-body .layui-show .layadmin-iframe").height())
	        //监听排序
	        table.on('sort(funTable)', function(obj){
	           //console.log(this, obj.field, obj.type)
	            //return;
	            //服务端排序
	            table.reload('property', {
	                initSort: obj,
	                //,page: {curr: 1} //重新从第一页开始
	                where: { //重新请求服务端
	                    key: obj.field, //排序字段
	                    order: obj.type //排序方式
	                }
	            });
	        });
	        //区别按钮属性
	        $('.layui-btn').on('click', function(){
	            var type = $(this).data('type');
	            active[type] ? active[type].call(this) : '';
	        });
	
	    });
    	
    }
    
    function unitTable(userId){
    	if(!userId){
    		userId = '10001'
    	}
	    var table2
	    layui.use(['table','element'], function () {
	    	table2 = layui.table;
	    	var element=layui.element;
	        //渲染
	        table2.render({
	            elem: '#funTable1',
	            url: '/userProperty/getTableData',
	            method:"POST",
	            where: {param: {'userId' : userId,dataType : 'UNITCODE'}},
	            limit: 15,
	            id: 'property1',
				height: commonDislodgeTable(),
	            page: {
	                count: 500, //数据总数，从服务端得到
	                groups: 5,
	                limits: [15,30,45,60],
	                layout: ['count', 'limit', 'prev', 'page', 'next', 'skip'], //自定义分页布局
	                first: '首页', //不显示首页
	                last: '尾页', //不显示尾页
	                theme: '#0F9EE0'
	            },
	            cols: [[
					{ width: 45,"title":'<input id="checkAllUnit" type="checkbox" lay-skin="primary" >',
						templet: function(d){
							var btn;
							if(d.permission == 1){
								console.log(d.permission);
								btn =" <input checked=\"checked\" type=\"checkbox\" name=\"permission1\"  lay-skin=\"primary\" data-on-permission-id=\""+ d.projectId +"\"  >";
							}else{
								btn =" <input type=\"checkbox\" name=\"permission1\"  lay-skin=\"primary\" data-on-permission-id=\""+ d.projectId +"\"  >" ;	
							}
				        	return btn;
				      }},
	                {title:'序号', type:'numbers'},
	                {field:'projectName',   title:'部门名称',  style:'cursor: pointer;',align:'center'},
	                {field:'projectCode',      title:'部门编码', style:'cursor: pointer;',align:'center'},
	            ]],
	            done:function(res, curr, count){
	            	$("#checkAllUnit").next().on("click",function () {
	            		//console.log($(this).prev().prop("checked"))
	                    if ($(this).prev().prop("checked")) {
	                    	//真实框
	                        $("input[name='permission1']").prop("checked", true);
	                    	//表面框
	                        $("input[name='permission1']").next().addClass('layui-form-checked');
	                        
	                    } else {
	                        $("input[name='permission1']").prop("checked", false);
	                        $("input[name='permission1']").next().removeClass('layui-form-checked');
	                    }
	                });
	            	
	            }
	        });
	        
	     // 触发不同的按钮事件
	        var $ = layui.$, active = {
	            
	            addEvent1: function(){ //点击删除按钮
	            	saveUserPropertyUnit();
	            },
	            searchEvent1:function(){
	            	table.reload('property1', {
		                where: { //重新请求服务端
		                    param :{projectName : $("#unitName").val()}
		                }
		            });
	            },
	            resetEvent1:function(){
	            	$("input[name=unitName]").val(''); 
	            	unitTable();
	            	
	            }
	            
	        };
	
	        //区别按钮属性
	        $('.layui-btn').on('click', function(){
	            var type = $(this).data('type');
	            active[type] ? active[type].call(this) : '';
	        });
	    });
    }
</script>
	
	
	
<script type="text/javascript">
		function saveUserProperty(){
			//var userId = $("#userId").val();
		   //当前页面的数据（删除当前页的数据，保存当前页选中的数据）
		   var currentPageDataId ='';
		   $.each(userIds,function(index,userId){
			   currentPageDataId ='';
			   $('input[name=permission]').each(function () {
				   currentPageDataId +=  $(this).data('onPermissionId')+',';
			     });
		    });
		   console.log(currentPageDataId);
		    //要保存的数据
			var userProperties = new Array();
			var dataId ='';
			$.each(userIds,function(index,userId){
				dataId ='';
				$('input[name=permission]:checked').each(function () {
					dataId += ','+$(this).data('onPermissionId')+',';
			     });
				console.log(dataId);
				var property = {
		                "userId" : userId, //用户id
		                "dataId" : dataId,//数据id
		                "permission" : 1,//使用
		                "dataType" :'project_id',//授权类型 1 项目  待优化成动态的Tab
		            };
		        userProperties.push(property);
			});
			
		   if(userIds.length>0){
			   console.log(userProperties);
		    	$.ajax({
					type : 'post',
					dataType : 'text',
					data : {"userProperties" : JSON.stringify(userProperties),"dataType": 'project_id',"userIds":JSON.stringify(userIds),"currentPageDataId":currentPageDataId},
					url :'/userProperty/saveUserPropertyList',
					success : function(data) {
						if(data!='500'){
							layer.msg("操作成功")
						}
					},
					error : function(e) {
						layer.msg("出错了！");
					}
				});
		    }else{
		    	console.log(userIds);
		    	layer.msg("请选择用户！");
		    }
			
			
		}
		
		
		
		
		
		function saveUserPropertyUnit(){
			//var userId = $("#userId").val();
		   //当前页面的数据（删除当前页的数据，保存当前页选中的数据）
		   var currentPageDataId ='';
		   $.each(userIds,function(index,userId){
			   currentPageDataId ='';
			   $('input[name=permission1]').each(function () {
				   currentPageDataId +=  $(this).data('onPermissionId')+',';
			     });
		    });
		   console.log(currentPageDataId);
		    //要保存的数据
			var userProperties = new Array();
			var dataId ='';
			$.each(userIds,function(index,userId){
				dataId ='';
				$('input[name=permission1]:checked').each(function () {
					dataId += ','+$(this).data('onPermissionId')+',';
			     });
				console.log(dataId);
				var property = {
		                "userId" : userId, //用户id
		                "dataId" : dataId,//数据id
		                "permission" : 1,//使用
		                "dataType" :'UNITCODE',//授权类型 1 项目  待优化成动态的Tab
		            };
		        userProperties.push(property);
			});
			
	       if(userIds.length>0){
	    	   //console.log(userIds);
	        	$.ajax({
	    			type : 'post',
	    			dataType : 'text',
	    			data : {"userProperties" : JSON.stringify(userProperties),"dataType": 'UNITCODE',"userIds":JSON.stringify(userIds),"currentPageDataId":currentPageDataId},
	    			url :'/userProperty/saveUserPropertyList',
	    			success : function(data) {
	    				if(data!='500'){
	    				  layer.msg("操作成功")
	    				}
	    			},
	    			error : function(e) {
	    				layer.msg("出错了！");
	    			}
	    		});
	        }else{
	        	layer.msg("请选择用户！");
	        }
			
			
		}
</script>
	
	
	<!-- 拓展 -->
	<script type="text/javascript">
	var orgTree;
	 function initOrgTree(userId){
		 
		 $.ajax({
				url: "/userProperty/select-unit-tree",//这个就是请求地址对应sAjaxSource
	            type : 'get',
	            dataType : 'json',
	            data:{"userId":userId},
	            async : false,
	            success : function(data){
	            	orgTreeSettingNodes = data;
	            	
	            },
	            error : function(msg) {
	            	layer.msg(msg);
	            }
	        });
      var orgTreeSetting = {
	   		  data: {
		            simpleData: {
		                enable: true
		            }
		        },
      		check: {
  				enable: true,//节点上是否显示 checkbox / radio
  				chkStyle: "checkbox",//勾选框类型(checkbox 或 radio）
  				chkboxType: { "Y": "s", "N": "s" },
  				autoCheckTrigger: true,//设置自动关联勾选时是否触发 beforeCheck / onCheck 事件回调函数
  				chkDisabledInherit: true
  			},
  			callback: {
  				beforeClick: orgTreeBeforeClick,//不勾选父节点
  			    beforeAsync: orgTreeBeforeAsync,//只有组需要异步加载 
  				onClick: function (e, treeId, treeNode, clickFlag) {
  					
  	            },
  	            onCheck : orgTreeOnCheck,//勾选节点
  	            beforeCheck: orgTreeBeforeCheck
  			}
  		}

      //用户配置树节点
      var orgTreeSettingNodes ;
      
      // zTree 的数据属性，读取全部数据
      orgTree = $.fn.zTree.init($("#orgTree"), orgTreeSetting, orgTreeSettingNodes);
    	//展开根节点
      var nodes = orgTree.getNodes();
      if (nodes.length > 0) {
      	orgTree.expandNode(nodes[0], true, true, true,true);
      	
      }
      
      //回显树checkbox
    	$.each(orgTreeSettingNodes,function(index,node){
	  		if(node.text=='1'){
	  			var nodes = orgTree.getNodesByParam("id",node.id, null);
	  			orgTree.checkNode(nodes[0], true,true,true); 
	  		}
		});
   
	 }
	 
	 
	 
	//点击节点时，如果是父节点则不勾选
   function orgTreeBeforeClick(treeId, treeNode) {
   	return true;
   	
   }

   //异步加载前
   function orgTreeBeforeAsync(treeId, treeNode) {
   	//只有属性为叶节点才进行异步加载，即只有组才加载农户
   	return true;
   	
   };
   //勾选节点,如果是未展开的父节点则展开子节点
   function orgTreeOnCheck(event, treeId, treeNode) {
   	if(treeNode.checked){
   		orgTree.selectNode(treeNode,true,false);
      }else{
      	orgTree.cancelSelectedNode(treeNode);
      }
    console.log("unitIds :"+unitIds);
   };
   
   function orgTreeAjaxDataFilter(treeId, parentNode, childNodes){
   	if(!childNodes) return null;
   	return childNodes;
   }
   
   function orgTreeBeforeExpand(treeId, treeNode){
  	 return true;
   }
   var unitIds = new Array();
   var checked = false;
   //check之前回调
	function orgTreeBeforeCheck(treeId, treeNode){
		//取消选中
		if(treeNode.checked ){
			checked =false;
		//选中
		}else{
			checked = true;
		}
		
	}
   //搜索树
	 function filter(node){
	       var _keywords=$("#keyword").val();
	       console.log(node);
	       console.log(node.name.indexOf(_keywords));
	       console.log(node.isParent);
	       return (node.id != '10001' && node.name.indexOf(_keywords) == -1);       
	   };

	var hiddenNodes=[]; //用于存储被隐藏的结点

	//过滤ztree显示数据
	function filterSearch(value){
		orgTree.showNodes(hiddenNodes);
   		//获取符合条件的叶子结点
   		hiddenNodes = orgTree.getNodesByFilter(filter);
   		
   		console.log("masw---"+hiddenNodes);
   		orgTree.hideNodes(hiddenNodes);
	};
   
   
	function saveUserPropertyUnitTree(){
		unitIds.splice(0,unitIds.length);
		var nodes = orgTree.getCheckedNodes(true);
		$.each(nodes,function(i,node){
			unitIds.push(nodes[i].id);
		});
		console.log(unitIds);
		//var userId = $("#userId").val();
	   //当前页面的数据（删除当前页的数据，保存当前页选中的数据）
	   var currentPageDataId ='';
	   $.each(userIds,function(index,userId){
		   currentPageDataId ='';
		   $('input[name=permission1]').each(function () {
			   currentPageDataId +=  $(this).data('onPermissionId')+',';
		     });
	    });
	   console.log(currentPageDataId);
	    //要保存的数据
		var userProperties = new Array();
		var dataId ='';
		$.each(userIds,function(index,userId){
			dataId ='';
			$.each(unitIds,function(index,unitId){
				dataId += ','+unitId+',';
		     });
			console.log(dataId);
			var property = {
	                "userId" : userId, //用户id
	                "dataId" : dataId,//数据id
	                "permission" : 1,//使用
	                "dataType" :'unit_id',//授权类型 1 项目  待优化成动态的Tab
	            };
	        userProperties.push(property);
		});
		
      if(userIds.length>0){
   	   //console.log(userIds);
       	$.ajax({
   			type : 'post',
   			dataType : 'text',
   			data : {"userProperties" : JSON.stringify(userProperties),"dataType": 'unit_id',"userIds":JSON.stringify(userIds),"dataId":dataId},
   			url :'/userProperty/saveUserPropertyList',
   			success : function(data) {
   				if(data!='500'){
   				  layer.msg("操作成功")
   				}
   			},
   			error : function(e) {
   				layer.msg("出错了！");
   			}
   		});
       }else{
       	layer.msg("请选择用户！");
       }
		
	}
	
	function reset(){
       $("#keyword").val(''); 	
       filterSearch($("#keyword").val());
	}
	</script>
 
    <!-- 以下为直属研究院相关js -->
    <script type="text/javascript">
    
    function dicTable(userId){
    	if(!userId){
    		userId = '10001'
    	}
	    var table3
	    layui.use(['table','element'], function () {
	    	table3 = layui.table;
	    	var element=layui.element;
	        //渲染
	        table3.render({
	            elem: '#funTable2',
	            url: '/userProperty/getTableData',
	            method:"POST",
	            where: {param: {'userId' : userId,dataType : 'G0DSM'}},
	            limit: 15,
	            id: 'property2',
				height: commonDislodgeTable(),
	            page: {
	                count: 500, //数据总数，从服务端得到
	                groups: 5,
	                limits: [15,30,45,60],
	                layout: ['count', 'limit', 'prev', 'page', 'next', 'skip'], //自定义分页布局
	                first: '首页', //不显示首页
	                last: '尾页', //不显示尾页
	                theme: '#0F9EE0'
	            },
	            cols: [[
					{width: '5%',"title":'<input id="checkAllUnit" type="checkbox" lay-skin="primary" >',
						templet: function(d){
							var btn;
							if(d.permission == 1){
								console.log(d.permission);
								btn =" <input checked=\"checked\" type=\"checkbox\" name=\"permission2\"  lay-skin=\"primary\" data-on-permission-id=\""+ d.projectCode +"\"  >";
							}else{
								btn =" <input type=\"checkbox\" name=\"permission2\"  lay-skin=\"primary\" data-on-permission-id=\""+ d.projectCode +"\"  >" ;	
							}
				        	return btn;
				      }},
	                {title:'序号', type:'numbers', width: '7%'},
	                {field:'projectName',   title:'研究院名称',  style:'cursor: pointer;',align:'center'},
	                {field:'projectCode',      title:'数值', style:'cursor: pointer;',align:'center'},
	            ]],
	            done:function(res, curr, count){
	            	$("#checkAllUnit").next().on("click",function () {
	            		//console.log($(this).prev().prop("checked"))
	                    if ($(this).prev().prop("checked")) {
	                    	//真实框
	                        $("input[name='permission2']").prop("checked", true);
	                    	//表面框
	                        $("input[name='permission2']").next().addClass('layui-form-checked');
	                        
	                    } else {
	                        $("input[name='permission2']").prop("checked", false);
	                        $("input[name='permission2']").next().removeClass('layui-form-checked');
	                    }
	                });
	            	
	            }
	        });
	        
	     // 触发不同的按钮事件
	        var $ = layui.$, active = {
	            
	            addEvent3: function(){ //点击删除按钮
	            	saveUserPropertyDic();
	            },
	            searchEvent3:function(){
	            	table.reload('property2', {
		                where: { //重新请求服务端
		                    param :{projectName : $("#dicName").val()}
		                }
		            });
	            },
	            resetEvent3:function(){
	            	$("input[name=dicName]").val(''); 
	            	dicTable();
	            	
	            }
	            
	        };
	
	        //区别按钮属性
	        $('.layui-btn').on('click', function(){
	            var type = $(this).data('type');
	            active[type] ? active[type].call(this) : '';
	        });
	    });
    }
    
    
	function saveUserPropertyDic(){
		//var userId = $("#userId").val();
	   //当前页面的数据（删除当前页的数据，保存当前页选中的数据）
	   var currentPageDataId ='';
	   $.each(userIds,function(index,userId){
		   currentPageDataId ='';
		   $('input[name=permission2]').each(function () {
			   currentPageDataId +=  $(this).data('onPermissionId')+',';
		     });
	    });
	   console.log(currentPageDataId);
	    //要保存的数据
		var userProperties = new Array();
		var dataId ='';
		$.each(userIds,function(index,userId){
			dataId ='';
			$('input[name=permission2]:checked').each(function () {
				dataId += ','+$(this).data('onPermissionId')+',';
		     });
			console.log(dataId);
			var property = {
	                "userId" : userId, //用户id
	                "dataId" : dataId,//数据id
	                "permission" : 1,//使用
	                "dataType" :'G0DSM',//授权类型 1 项目  待优化成动态的Tab
	            };
	        userProperties.push(property);
		});
		
       if(userIds.length>0){
    	   //console.log(userIds);
        	$.ajax({
    			type : 'post',
    			dataType : 'text',
    			data : {"userProperties" : JSON.stringify(userProperties),"dataType": 'G0DSM',"userIds":JSON.stringify(userIds),"currentPageDataId":currentPageDataId},
    			url :'/userProperty/saveUserPropertyList',
    			success : function(data) {
    				if(data!='500'){
    				  layer.msg("操作成功")
    				}
    			},
    			error : function(e) {
    				layer.msg("出错了！");
    			}
    		});
        }else{
        	layer.msg("请选择用户！");
        }
		
		
	}
    
    </script>
</body>	
</html>
	
	
	
	

 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      